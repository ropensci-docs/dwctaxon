[{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to dwctaxon","title":"Contributing to dwctaxon","text":"outlines propose change dwctaxon.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to dwctaxon","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to dwctaxon","text":"want make bigger change, ’s good idea first file issue make sure maintainer agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to dwctaxon","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"ropensci/dwctaxon\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to dwctaxon","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to dwctaxon","text":"dwctaxon project uses rOpenSci Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 dwctaxon authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"the-data","dir":"Articles","previous_headings":"","what":"The data","title":"Editing DwC taxon data","text":"dwctaxon comes example dataset dct_filmies, taxonomic data filmy ferns (family Hymenophyllaceae). Let’s take quick look data (may need scroll right frame code see text): demonstration purposes, just use first five rows: Although DwC taxon format includes large number terms (columns)1, typical database use . dct_filmies includes 5 columns. usage clear biologists, two columns need explanation. taxonID unique ID row (name), acceptedNameUsageID provided synonyms; indicates taxonID accepted name. information DwC taxon format, see vignette(\"--dwc\"). rest vignette consist modifying dataset.","code":"dct_filmies #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             #>    <chr>    <chr>               <chr>           <chr>     <chr>                                      #>  1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl              #>  2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                 #>  3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price  #>  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            #>  5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel.  #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch #>  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    #>  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           #>  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             #> # ℹ 2,441 more rows filmies_small <- head(dct_filmies, 5)"},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"adding-rows-by-vector","dir":"Articles","previous_headings":"Adding rows","what":"Adding rows by vector","title":"Editing DwC taxon data","text":"dct_add_row() used add rows. simplest way specifying new values vectors (vectors length 1 recycled): Notice although specify taxonID modified, columns automatically filled default2; can turned setting fill_taxon_id stamp_modified arguments FALSE. names new values valid DwC terms. can see terms available dct_terms:","code":"filmies_small |>   dct_add_row(     scientificName = c(\"Homo sapiens\", \"Drosophila melanogaster\"),     taxonomicStatus = \"accepted\",     taxonRank = \"species\"   ) #> # A tibble: 7 × 6 #>   taxonID                          acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified          #>   <chr>                            <chr>               <chr>           <chr>     <chr>                                     <chr>             #> 1 54115096                         NA                  accepted        species   Cephalomanes atrovirens Presl             NA                #> 2 54133783                         54115097            synonym         species   Trichomanes crassum Copel.                NA                #> 3 54115097                         NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                #> 4 54133784                         54115098            synonym         species   Trichomanes densinervium Copel.           NA                #> 5 54115098                         NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel. NA                #> 6 be111923a2780f4931ca7fa4ed09a1b9 NA                  accepted        species   Homo sapiens                              2024-03-03 07:25… #> 7 5942a5b04c33f577946e4ccfbe490800 NA                  accepted        species   Drosophila melanogaster                   2024-03-03 07:25… dct_terms #> # A tibble: 47 × 2 #>    group term                #>  * <chr> <chr>               #>  1 taxon taxonID             #>  2 taxon scientificNameID    #>  3 taxon acceptedNameUsageID #>  4 taxon parentNameUsageID   #>  5 taxon originalNameUsageID #>  6 taxon nameAccordingToID   #>  7 taxon namePublishedInID   #>  8 taxon taxonConceptID      #>  9 taxon scientificName      #> 10 taxon acceptedNameUsage   #> # ℹ 37 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"adding-rows-by-dataframe","dir":"Articles","previous_headings":"Adding rows","what":"Adding rows by dataframe","title":"Editing DwC taxon data","text":"Adding rows vectors shown works well need add small number rows. However, get unwieldy large number add. case, can instead add via dataframe. dataframe column names matching valid DwC taxon terms: Note case taxonID already existed data add, generated automatically.","code":"# Let's add some rows from the original dct_filmies to_add <- tail(dct_filmies)  filmies_small |>   dct_add_row(new_dat = to_add) #> # A tibble: 11 × 6 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank    scientificName                                              modified            #>    <chr>    <chr>               <chr>           <chr>        <chr>                                                       <chr>               #>  1 54115096 NA                  accepted        species      Cephalomanes atrovirens Presl                               NA                  #>  2 54133783 54115097            synonym         species      Trichomanes crassum Copel.                                  NA                  #>  3 54115097 NA                  accepted        species      Cephalomanes crassum (Copel.) M. G. Price                   NA                  #>  4 54133784 54115098            synonym         species      Trichomanes densinervium Copel.                             NA                  #>  5 54115098 NA                  accepted        species      Cephalomanes densinervium (Copel.) Copel.                   NA                  #>  6 54126747 NA                  accepted        infraspecies Hymenophyllum myriocarpum var. endiviifolium (Desv.) Stolze 2024-03-03 07:25:1… #>  7 54135528 54126748            synonym         species      Hymenophyllum nigrescens Liebm.                             2024-03-03 07:25:1… #>  8 54135530 54126748            synonym         species      Mecodium nigricans (Presl ex Kl.) Copel.                    2024-03-03 07:25:1… #>  9 54135531 54126748            synonym         species      Sphaerocionium nigricans Presl ex Kl.                       2024-03-03 07:25:1… #> 10 54126748 NA                  accepted        infraspecies Hymenophyllum myriocarpum var. nigrescens (Liebm.) Stolze   2024-03-03 07:25:1… #> 11 54126749 NA                  accepted        infraspecies Hymenophyllum trichophyllum var. buesii C. V. Morton        2024-03-03 07:25:1…"},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"deleting-rows","dir":"Articles","previous_headings":"","what":"Deleting rows","title":"Editing DwC taxon data","text":"dct_drop_row() drops one rows taxonID scientificName. example, can exclude row Cephalomanes atrovirens Presl either using scientificName (Cephalomanes atrovirens Presl) taxonID (54115096): Since looks values taxonID scientificName, dct_drop_row() requires unique non-missing taxonomic database. course, since taxonomic database dataframe, also use subsetting techniques like brackets base R dplyr::filter() tidyverse delete rows.","code":"filmies_small |>   dct_drop_row(scientificName = \"Cephalomanes atrovirens Presl\") #> # A tibble: 4 × 5 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     #> 1 54133783 54115097            synonym         species   Trichomanes crassum Copel.                #> 2 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price #> 3 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           #> 4 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel.  filmies_small |>   dct_drop_row(taxonID = \"54115096\") #> # A tibble: 4 × 5 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     #> 1 54133783 54115097            synonym         species   Trichomanes crassum Copel.                #> 2 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price #> 3 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           #> 4 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel."},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"identifying-rows-to-modify","dir":"Articles","previous_headings":"Modifying rows","what":"Identifying rows to modify","title":"Editing DwC taxon data","text":"dct_modify_row() changes values existing row. , helpful reiterate purpose taxonID column: unique identifier row (taxonomic name) data. use taxonID identify row change, apply new values using DwC terms. Notice additional automatic changes besides just taxonomicStatus. Since new status \"accepted\", dwctaxon automatically set acceptedNameUsageID (indicates taxonID accepted name synonyms) NA. behavior can disabled setting clear_usage_id argument FALSE. see modified field updated well. However, can difficult humans keep track taxonID matches name; typically, think terms species names, ID numbers. reason, can also use scientificName instead taxon_id specify row modify3. provide taxonID scientificName, dwctaxon identify row taxonID apply scientificName new scientific name:","code":"# Change the status of Trichomanes crassum Copel. to \"accepted\" filmies_small |>   dct_modify_row(     taxonID = \"54133783\", # taxonID of Trichomanes crassum Copel.     taxonomicStatus = \"accepted\"   ) #> # A tibble: 5 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                   #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                      #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl             NA                         #> 2 54133783 NA                  accepted        species   Trichomanes crassum Copel.                2024-03-03 07:25:12.238782 #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                         #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           NA                         #> 5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel. NA # Change the status of Trichomanes crassum Copel. to \"accepted\" filmies_small |>   dct_modify_row(     scientificName = \"Trichomanes crassum Copel.\",     taxonomicStatus = \"accepted\"   ) #> # A tibble: 5 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                   #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                      #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl             NA                         #> 2 54133783 NA                  accepted        species   Trichomanes crassum Copel.                2024-03-03 07:25:12.328617 #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                         #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           NA                         #> 5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel. NA # Change the name of Trichomanes crassum Copel. filmies_small |>   dct_modify_row(     taxonID = \"54133783\", # taxonID of Trichomanes crassum Copel.     scientificName = \"Bogus name\"   ) #> # A tibble: 5 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                   #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                      #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl             NA                         #> 2 54133783 54115097            synonym         species   Bogus name                                2024-03-03 07:25:12.411951 #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                         #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           NA                         #> 5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel. NA"},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"automatic-re-mapping-of-synonyms","dir":"Articles","previous_headings":"Modifying rows","what":"Automatic re-mapping of synonyms","title":"Editing DwC taxon data","text":"Another convenient automated behavior dwctaxon ability “re-map” synonyms. , previously accepted name (say, “”) changed synonym another name (say, “B”), synonyms “” also changed synonyms “B”. Let’s see works example data: Notice two names modified even though specified one; since Trichomanes densinervium Copel. synonym Cephalomanes densinervium (Copel.) Copel., also gets re-mapped accepted name Cephalomanes crassum (Copel.) M. G. Price","code":"# Change C. densinervium to a synonym of C. crassum filmies_small |>   dct_modify_row(     scientificName = \"Cephalomanes densinervium (Copel.) Copel.\",     taxonomicStatus = \"synonym\",     acceptedNameUsage = \"Cephalomanes crassum (Copel.) M. G. Price\"   ) #> # A tibble: 5 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                   #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                      #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl             NA                         #> 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                NA                         #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                         #> 4 54133784 54115097            synonym         species   Trichomanes densinervium Copel.           2024-03-03 07:25:12.495547 #> 5 54115098 54115097            synonym         species   Cephalomanes densinervium (Copel.) Copel. 2024-03-03 07:25:12.493102"},{"path":"https://docs.ropensci.org/dwctaxon/articles/editing.html","id":"filling-columns","dir":"Articles","previous_headings":"","what":"Filling columns","title":"Editing DwC taxon data","text":"described vignette(\"--dwc\"), several terms DwC call “term - termID” pairs, e.g., acceptedNameUsage acceptedNameUsageID, parentNameUsage parentNameUsageID, etc. Typically, one actual scientific name (e.g., acceptedNameUsage, accepted name synonym), one taxonID name (e.g., acceptedNameUsageID, taxonID accepted name synonym). manager database choose whether use either terms pair. sort data redundant prone error entered manually, dwctaxon can us dct_fill_col(). easiest way see works example (may need scroll right see new column): meaning arguments fill_to fill_from think fairly clear: filling acceptedNameUsage column values scientificName. match_to match_from bit trickier; describe find data filling. , looking acceptedNameUsage matching acceptedNameUsageID (match_from) taxonID (match_to). Like said, ’s easiest figure dct_fill_col() trying .","code":"# Fill-in the acceptedNameUsage column with scientific names filmies_small |>   dct_fill_col(     fill_to = \"acceptedNameUsage\",     fill_from = \"scientificName\",     match_to = \"taxonID\",     match_from = \"acceptedNameUsageID\"   ) #> # A tibble: 5 × 7 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            acceptedNameUsage                modified #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                            <chr>    #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl             NA                               2024-03… #> 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                Cephalomanes crassum (Copel.) M… 2024-03… #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price NA                               2024-03… #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           Cephalomanes densinervium (Cope… 2024-03… #> 5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel. NA                               2024-03…"},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"import-data","dir":"Articles","previous_headings":"","what":"Import data","title":"Real World Example","text":"use Database Vascular Plants Canada (VASCAN), available Darwin Core Archive. data can obtained manually going VASCAN website, downloading Darwin Core Archive, unzipping it1. Alternatively, can downloaded unzipped R. First, set temporary folders downloading specify URL: Next, download unzip zip file. Finally, load taxonomic data (taxon.txt) R. tab-separated text file, use readr::read_tsv() load . dataset includes 32770 rows (taxa) 24 columns.","code":"# - Specify temporary folder for downloading data temp_dir <- tempdir() # - Set name of zip file temp_zip <- paste0(temp_dir, \"/dwca-vascan.zip\") # - Set name of unzipped folder temp_unzip <- paste0(temp_dir, \"/dwca-vascan\") # Download data download.file(url = vascan_url, destfile = temp_zip, mode = \"wb\")  # Unzip unzip(temp_zip, exdir = temp_unzip)  # Check the contents of the unzipped data (the Darwin Core Archive) list.files(temp_unzip) #> [1] \"description.txt\"          \"distribution.txt\"         \"eml.xml\"                  \"meta.xml\"                 \"resourcerelationship.txt\" #> [6] \"taxon.txt\"                \"vernacularname.txt\" vascan <- read_tsv(paste0(temp_unzip, \"/taxon.txt\")) #> Warning: One or more parsing issues, call `problems()` on your data frame for details, e.g.: #>   dat <- vroom(...) #>   problems(dat) #> Rows: 32770 Columns: 24 #> ── Column specification ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────── #> Delimiter: \"\\t\" #> chr (20): nameAccordingToID, scientificName, acceptedNameUsage, parentNameUsage, nameAccordingTo, higherClassification, class, order, fa... #> dbl  (4): id, taxonID, acceptedNameUsageID, parentNameUsageID #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.  # Take a peak at the data vascan #> # A tibble: 32,770 × 24 #>       id taxonID acceptedNameUsageID parentNameUsageID nameAccordingToID    scientificName acceptedNameUsage parentNameUsage nameAccordingTo #>    <dbl>   <dbl>               <dbl>             <dbl> <chr>                <chr>          <chr>             <chr>           <chr>           #>  1    73      73                  73                NA http://dx.doi.org/1… Equisetopsida… Equisetopsida C.… NA              Chase, M.W. & … #>  2    26      26                  26                73 http://dx.doi.org/1… Equisetidae W… Equisetidae Warm… Equisetopsida … Chase, M.W. & … #>  3    25      25                  25                26 http://www.jstor.or… Equisetales d… Equisetales de C… Equisetidae Wa… Smith, A.R., K… #>  4   128     128                 128                25 http://www.jstor.or… Equisetaceae … Equisetaceae Mic… Equisetales de… Smith, A.R., K… #>  5  1142    1142                1142               128 http://www.efloras.… Equisetum Lin… Equisetum Linnae… Equisetaceae M… FNA Editorial … #>  6  2004    2004                2004              1142 http://www.efloras.… Equisetum sub… Equisetum subg. … Equisetum Linn… FNA Editorial … #>  7  5467    5467                5467              2004 http://www.efloras.… Equisetum flu… Equisetum fluvia… Equisetum subg… FNA Editorial … #>  8  5466    5466                5466              2004 http://www.efloras.… Equisetum arv… Equisetum arvens… Equisetum subg… FNA Editorial … #>  9  5472    5472                5472              2004 http://www.efloras.… Equisetum pra… Equisetum praten… Equisetum subg… FNA Editorial … #> 10  5471    5471                5471              2004 http://www.efloras.… Equisetum pal… Equisetum palust… Equisetum subg… FNA Editorial … #> # ℹ 32,760 more rows #> # ℹ 15 more variables: higherClassification <chr>, class <chr>, order <chr>, family <chr>, genus <chr>, subgenus <chr>, #> #   specificEpithet <chr>, infraspecificEpithet <chr>, taxonRank <chr>, scientificNameAuthorship <chr>, taxonomicStatus <chr>, #> #   modified <chr>, license <chr>, bibliographicCitation <chr>, references <chr>"},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"validation","dir":"Articles","previous_headings":"","what":"Validation","title":"Real World Example","text":"Let’s see dataset passes validation dwctaxon. usually good idea just run dct_validate() default settings first time. passes, can move . Looks like ’ve got problems… dig detail, let’s run dct_validate() , time output summary errors. summary lists one taxonID per row. Let’s count get higher-level view ’s going . see 2 kinds errors. 1 column invalid name (id) 26 rows duplicated scientific names.","code":"dct_validate(vascan) #> Error: check_sci_name failed #>    scientificName detected with duplicated value #>    Bad scientificName: Scilla esculenta Ker Gawler, Arnica monocephala Rydberg, Arnica pedunculata Rydberg, Trifolium tridentatum Lindley, Oenothera angustissima R.R. Gates, Spiraea discolor Pursh, Viola discurrens Greene, Cogswellia simplex (Nuttall ex S. Watson) M.E. Jones, Scilla esculenta Ker Gawler, Ginseng trifolium (Linnaeus) Alph. Wood, Arnica pedunculata Rydberg, Arnica monocephala Rydberg, Swida racemosa (Lamarck) Moldenke, Spiraea discolor Pursh, Swida racemosa (Lamarck) Moldenke, Trifolium tridentatum Lindley, Oenothera angustissima R.R. Gates, Aralia triphylla Poiret, Panax lanceolatus Rafinesque, Panax pusillus Sims, Aralia triphylla Poiret, Ginseng trifolium (Linnaeus) Alph. Wood, Panax lanceolatus Rafinesque, Panax pusillus Sims, Cogswellia simplex (Nuttall ex S. Watson) M.E. Jones, Viola discurrens Greene validation_res <- dct_validate(vascan, on_fail = \"summary\") #> Warning: scientificName detected with duplicated value #> Warning: Invalid column names detected: id  validation_res #> # A tibble: 27 × 4 #>    taxonID scientificName                                       error                                         check           #>      <dbl> <chr>                                                <glue>                                        <chr>           #>  1      NA NA                                                   Invalid column names detected: id             check_col_names #>  2   10170 Scilla esculenta Ker Gawler                          scientificName detected with duplicated value check_sci_name  #>  3   10664 Arnica monocephala Rydberg                           scientificName detected with duplicated value check_sci_name  #>  4   10665 Arnica pedunculata Rydberg                           scientificName detected with duplicated value check_sci_name  #>  5   16398 Trifolium tridentatum Lindley                        scientificName detected with duplicated value check_sci_name  #>  6   17569 Oenothera angustissima R.R. Gates                    scientificName detected with duplicated value check_sci_name  #>  7   20099 Spiraea discolor Pursh                               scientificName detected with duplicated value check_sci_name  #>  8   21522 Viola discurrens Greene                              scientificName detected with duplicated value check_sci_name  #>  9   21946 Cogswellia simplex (Nuttall ex S. Watson) M.E. Jones scientificName detected with duplicated value check_sci_name  #> 10   24660 Scilla esculenta Ker Gawler                          scientificName detected with duplicated value check_sci_name  #> # ℹ 17 more rows validation_res %>%   count(check, error) #> # A tibble: 2 × 3 #>   check           error                                             n #>   <chr>           <glue>                                        <int> #> 1 check_col_names Invalid column names detected: id                 1 #> 2 check_sci_name  scientificName detected with duplicated value    26"},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"duplicate-names","dir":"Articles","previous_headings":"Validation > Investigate errors","what":"Duplicate names","title":"Real World Example","text":"Let’s take closer look duplicated names. can join back original data investigate names. see cases, multiple entries exact scientific name (example, Arnica monocephala Rydberg) differ value nameAccordingToID. seems like something database manager fix.","code":"dup_names <-   validation_res %>%   filter(grepl(\"scientificName detected with duplicated value\", error)) %>%   arrange(scientificName)  dup_names #> # A tibble: 26 × 4 #>    taxonID scientificName                                       error                                         check          #>      <dbl> <chr>                                                <glue>                                        <chr>          #>  1   29934 Aralia triphylla Poiret                              scientificName detected with duplicated value check_sci_name #>  2   31463 Aralia triphylla Poiret                              scientificName detected with duplicated value check_sci_name #>  3   10664 Arnica monocephala Rydberg                           scientificName detected with duplicated value check_sci_name #>  4   25705 Arnica monocephala Rydberg                           scientificName detected with duplicated value check_sci_name #>  5   10665 Arnica pedunculata Rydberg                           scientificName detected with duplicated value check_sci_name #>  6   25704 Arnica pedunculata Rydberg                           scientificName detected with duplicated value check_sci_name #>  7   21946 Cogswellia simplex (Nuttall ex S. Watson) M.E. Jones scientificName detected with duplicated value check_sci_name #>  8   32013 Cogswellia simplex (Nuttall ex S. Watson) M.E. Jones scientificName detected with duplicated value check_sci_name #>  9   25350 Ginseng trifolium (Linnaeus) Alph. Wood              scientificName detected with duplicated value check_sci_name #> 10   31464 Ginseng trifolium (Linnaeus) Alph. Wood              scientificName detected with duplicated value check_sci_name #> # ℹ 16 more rows inner_join(   select(dup_names, taxonID),   vascan,   by = \"taxonID\" ) %>%   # Just look at the first 6 columns   select(1:6) #> # A tibble: 26 × 6 #>    taxonID    id acceptedNameUsageID parentNameUsageID nameAccordingToID                                                 scientificName      #>      <dbl> <dbl>               <dbl>             <dbl> <chr>                                                             <chr>               #>  1   29934 29934                2695                NA NA                                                                Aralia triphylla P… #>  2   31463 31463                2695                NA NA                                                                Aralia triphylla P… #>  3   10664 10664                2857                NA http://www.efloras.org/volume_page.aspx?volume_id=1021&flora_id=1 Arnica monocephala… #>  4   25705 25705                2857                NA http://www.botanicus.org/item/31753003488092                      Arnica monocephala… #>  5   10665 10665                2857                NA http://www.efloras.org/volume_page.aspx?volume_id=1021&flora_id=1 Arnica pedunculata… #>  6   25704 25704                2857                NA http://www.botanicus.org/item/31753003488092                      Arnica pedunculata… #>  7   21946 21946                2613                NA NA                                                                Cogswellia simplex… #>  8   32013 32013                2613                NA http://www.tropicos.org                                           Cogswellia simplex… #>  9   25350 25350                2695                NA NA                                                                Ginseng trifolium … #> 10   31464 31464                2695                NA NA                                                                Ginseng trifolium … #> # ℹ 16 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"invalid-column-names","dir":"Articles","previous_headings":"Validation > Investigate errors","what":"Invalid column names","title":"Real World Example","text":"Let’s see id column. id contains numbers unique. words, appear unique key values row dataset (one expect name id). probably case dataset good reason using id column, even though standard DwC column.","code":"vascan %>%   select(id) #> # A tibble: 32,770 × 1 #>       id #>    <dbl> #>  1    73 #>  2    26 #>  3    25 #>  4   128 #>  5  1142 #>  6  2004 #>  7  5467 #>  8  5466 #>  9  5472 #> 10  5471 #> # ℹ 32,760 more rows  n_distinct(vascan$id) #> [1] 32770"},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"fixing-the-data","dir":"Articles","previous_headings":"Validation","what":"Fixing the data","title":"Real World Example","text":"Let’s see can get dataset pass validation. First, let’s remove duplicated names. something done thought, let’s just keep first name pair. Next, run validation , time allow id extra column. passes, now confirmed steps needed obtain correctly formatted DwC data de-duplicate species names account id column.","code":"vascan_fixed <-   vascan %>%   filter(!duplicated(scientificName)) dct_validate(   vascan_fixed,   extra_cols = \"id\" ) #> # A tibble: 32,757 × 24 #>       id taxonID acceptedNameUsageID parentNameUsageID nameAccordingToID    scientificName acceptedNameUsage parentNameUsage nameAccordingTo #>    <dbl>   <dbl>               <dbl>             <dbl> <chr>                <chr>          <chr>             <chr>           <chr>           #>  1    73      73                  73                NA http://dx.doi.org/1… Equisetopsida… Equisetopsida C.… NA              Chase, M.W. & … #>  2    26      26                  26                73 http://dx.doi.org/1… Equisetidae W… Equisetidae Warm… Equisetopsida … Chase, M.W. & … #>  3    25      25                  25                26 http://www.jstor.or… Equisetales d… Equisetales de C… Equisetidae Wa… Smith, A.R., K… #>  4   128     128                 128                25 http://www.jstor.or… Equisetaceae … Equisetaceae Mic… Equisetales de… Smith, A.R., K… #>  5  1142    1142                1142               128 http://www.efloras.… Equisetum Lin… Equisetum Linnae… Equisetaceae M… FNA Editorial … #>  6  2004    2004                2004              1142 http://www.efloras.… Equisetum sub… Equisetum subg. … Equisetum Linn… FNA Editorial … #>  7  5467    5467                5467              2004 http://www.efloras.… Equisetum flu… Equisetum fluvia… Equisetum subg… FNA Editorial … #>  8  5466    5466                5466              2004 http://www.efloras.… Equisetum arv… Equisetum arvens… Equisetum subg… FNA Editorial … #>  9  5472    5472                5472              2004 http://www.efloras.… Equisetum pra… Equisetum praten… Equisetum subg… FNA Editorial … #> 10  5471    5471                5471              2004 http://www.efloras.… Equisetum pal… Equisetum palust… Equisetum subg… FNA Editorial … #> # ℹ 32,747 more rows #> # ℹ 15 more variables: higherClassification <chr>, class <chr>, order <chr>, family <chr>, genus <chr>, subgenus <chr>, #> #   specificEpithet <chr>, infraspecificEpithet <chr>, taxonRank <chr>, scientificNameAuthorship <chr>, taxonomicStatus <chr>, #> #   modified <chr>, license <chr>, bibliographicCitation <chr>, references <chr>"},{"path":"https://docs.ropensci.org/dwctaxon/articles/real-data.html","id":"summary","dir":"Articles","previous_headings":"Validation","what":"Summary","title":"Real World Example","text":"vignette shows dwctaxon can used DwC data find possible problems taxonomic dataset. able identify several rows duplicated scientific names one column follow DwC standards. , passes validation, giving us confidence dataset can used downstream taxonomic analyses.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Validating DwC taxon data","text":"Start loading packages setting random number generator seed since vignette involves random samples.","code":"library(dwctaxon) library(dplyr)  set.seed(12345)"},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"the-data","dir":"Articles","previous_headings":"","what":"The data","title":"Validating DwC taxon data","text":", use example dataset comes dwctaxon, dct_filmies: However, dct_filmies already well-formatted pass validation checks! lets introduce noise make things interesting. first rows may look , know data now problems.","code":"dct_filmies #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             #>    <chr>    <chr>               <chr>           <chr>     <chr>                                      #>  1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl              #>  2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                 #>  3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price  #>  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            #>  5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel.  #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch #>  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    #>  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           #>  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             #> # ℹ 2,441 more rows filmies_dirty <-   dct_filmies |>   # Change taxonomic status of one row to 'good'   dct_modify_row(taxonID = \"54115096\", taxonomicStatus = \"good\") |>   # Duplicate some rows at the end   bind_rows(tail(dct_filmies)) |>   # Insert bad values for `acceptedNameUsageID` of 5 random rows   rows_update(     tibble(       taxonID = sample(dct_filmies$taxonID, 5),       acceptedNameUsageID = sample(letters, 5)     ),     by = \"taxonID\"   )  filmies_dirty #> # A tibble: 2,457 × 6 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             modified                   #>    <chr>    <chr>               <chr>           <chr>     <chr>                                      <chr>                      #>  1 54115096 NA                  good            species   Cephalomanes atrovirens Presl              2024-03-03 07:25:20.658206 #>  2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                 NA                         #>  3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price  NA                         #>  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            NA                         #>  5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel.  NA                         #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch NA                         #>  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    NA                         #>  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           NA                         #>  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        NA                         #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             NA                         #> # ℹ 2,447 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"error-on-failure","dir":"Articles","previous_headings":"","what":"Error on failure","title":"Validating DwC taxon data","text":"dct_validate() workhorse function validating DwC data. default mode, dct_validate() issue error first time finds something wrong data (words, first check fails): dwctaxon tries provide useful error messages help determine data causing problem. , see rows taxonID 54126747, 54135528, 54135530, 54135531, 54126748, 54126749 duplicated. course know ’s duplicated purpose; real dataset, use information search duplicated values fix .","code":"dct_validate(filmies_dirty) #> Error: check_taxon_id failed #>    taxonID detected with duplicated value #>    Bad taxonID: 54126747, 54135528, 54135530, 54135531, 54126748, 54126749"},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"summary-on-failure","dir":"Articles","previous_headings":"","what":"Summary on failure","title":"Validating DwC taxon data","text":"troubleshooting DwC taxon dataset, may useful know problems instead fixing one time. case, set on_fail argument \"summary\" (on_fail can either default value \"error\" \"summary\"): (may need scroll right output see text). case, dct_validate() still issues warning let us know validation pass. error check columns describe went wrong; columns tell us data find errors. detailed summary, definitely able hunt bugs dataset!","code":"dct_validate(filmies_dirty, on_fail = \"summary\") #> Warning: taxonID detected with duplicated value #> Warning: taxonID detected whose taxonomicStatus is not in valid_tax_status (accepted, synonym, variant, NA) #> Warning: taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name. #> Warning: scientificName detected with duplicated value #> # A tibble: 18 × 6 #>    taxonID  acceptedNameUsageID scientificName                                              taxonomicStatus error                                                                                              check         #>    <chr>    <chr>               <chr>                                                       <chr>           <glue>                                                                                             <chr>         #>  1 54133841 k                   Trichomanes cumingii (Presl) C. Chr.                        NA              taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.      check_mapping #>  2 54134450 z                   Trichomanes omphalodes (Vieill.) C. Chr.                    NA              taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.      check_mapping #>  3 54134462 b                   Trichomanes amabile Nakai                                   NA              taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.      check_mapping #>  4 54134950 v                   Mecodium atrovirens (Col.) Copel.                           NA              taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.      check_mapping #>  5 54135730 x                   Leptocionium attenuatum (Hook.) Bosch                       NA              taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.      check_mapping #>  6 54126747 NA                  Hymenophyllum myriocarpum var. endiviifolium (Desv.) Stolze NA              scientificName detected with duplicated value                                                      check_sci_na… #>  7 54135528 NA                  Hymenophyllum nigrescens Liebm.                             NA              scientificName detected with duplicated value                                                      check_sci_na… #>  8 54135530 NA                  Mecodium nigricans (Presl ex Kl.) Copel.                    NA              scientificName detected with duplicated value                                                      check_sci_na… #>  9 54135531 NA                  Sphaerocionium nigricans Presl ex Kl.                       NA              scientificName detected with duplicated value                                                      check_sci_na… #> 10 54126748 NA                  Hymenophyllum myriocarpum var. nigrescens (Liebm.) Stolze   NA              scientificName detected with duplicated value                                                      check_sci_na… #> 11 54126749 NA                  Hymenophyllum trichophyllum var. buesii C. V. Morton        NA              scientificName detected with duplicated value                                                      check_sci_na… #> 12 54115096 NA                  Cephalomanes atrovirens Presl                               good            taxonID detected whose taxonomicStatus is not in valid_tax_status (accepted, synonym, variant, NA) check_tax_st… #> 13 54126747 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_… #> 14 54135528 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_… #> 15 54135530 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_… #> 16 54135531 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_… #> 17 54126748 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_… #> 18 54126749 NA                  NA                                                          NA              taxonID detected with duplicated value                                                             check_taxon_…"},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"checks","dir":"Articles","previous_headings":"","what":"Checks","title":"Validating DwC taxon data","text":"may wondering, separate “error” “check” columns summary output? dct_validate() conducts many smaller checks, can turned . complete description, run ?dct_validate(). turn, checks can identify different particular problems; granular description given “error” column. Furthermore, checks run dct_validate() can also run individual function. example, let’s just check values acceptedUsageID corresponding taxonID (words, synonyms map properly): important note checks compatible . example, check_sci_name checks scientific names (DwC term scientificName) non-missing unique; check_status_diff checks cases identical scientific names, taxonomic status name different. default settings dct_validate() use former latter. Whether expect scientific names unique depends set data1.","code":"filmies_dirty |>   dct_check_mapping() #> Error: check_mapping failed. #> taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name. #> Bad taxonID: 54133841, 54134450, 54134462, 54134950, 54135730 #> Bad scientificName: Trichomanes cumingii (Presl) C. Chr., Trichomanes omphalodes (Vieill.) C. Chr., Trichomanes amabile Nakai, Mecodium atrovirens (Col.) Copel., Leptocionium attenuatum (Hook.) Bosch #> Bad acceptedNameUsageID: k, z, b, v, x"},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"controlled-vocabularies","dir":"Articles","previous_headings":"","what":"Controlled vocabularies","title":"Validating DwC taxon data","text":"DwC taxon terms expected take small number values controlled vocabulary. example, taxonStatus (taxonomic status scientific name) may expected include values “accepted”, “synonym”, etc. unlike, e.g., scientificName, try control range possible values. However, although DwC recommends using controlled vocabulary terms, specify actual values! dwctaxon lets set (tries employ reasonable defaults), shown next section.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/validation.html","id":"changing-the-defaults","dir":"Articles","previous_headings":"","what":"Changing the defaults","title":"Validating DwC taxon data","text":"Say want use different set allowed values taxonStatus. , let’s include “good” data pass check taxonomic status (remember modified data taxonomicStatus one rows \"good\"). One way use valid_tax_status argument dct_validate() dct_check_tax_status(): specifying argument every time want check something gets tedious. can change default setting valid_tax_status dct_options() like : Now can run dct_check_tax_status() use new default value: can change back original default values reset = TRUE: Now running code throws error: large number settings can modified. See ?dct_options() description . can view current status options (default values) running dct_options() arguments: check value one particular setting passing name $ operator: can restore settings changes applied running .call() settings saved :","code":"filmies_dirty |>   dct_check_tax_status(     valid_tax_status = \"good, accepted, synonym\",     on_success = \"logical\" # Issue \"TRUE\" if the check passes   ) #> [1] TRUE # First save the current settings before making any changes old_settings <- dct_options()  # Change valid_tax_status setting dct_options(valid_tax_status = \"good, accepted, synonym\") filmies_dirty |>   dct_check_tax_status(on_success = \"logical\") #> [1] TRUE dct_options(reset = TRUE) filmies_dirty |>   dct_check_tax_status(on_success = \"logical\") #> Error: check_tax_status failed. #> taxonID detected whose taxonomicStatus is not in valid_tax_status (accepted, synonym, variant, NA) #> Bad taxonID: 54115096 #> Bad scientificName: Cephalomanes atrovirens Presl #> Bad taxonomicStatus: good dct_options() #> $check_taxon_id #> [1] TRUE #>  #> $check_tax_status #> [1] TRUE #>  #> $check_mapping_accepted #> [1] TRUE #>  #> $check_mapping_parent #> [1] TRUE #>  #> $check_mapping_original #> [1] TRUE #>  #> $check_mapping_accepted_status #> [1] FALSE #>  #> $check_sci_name #> [1] TRUE #>  #> $check_status_diff #> [1] FALSE #>  #> $check_col_names #> [1] TRUE #>  #> $valid_tax_status #> [1] \"accepted, synonym, variant, NA\" #>  #> $extra_cols #> NULL #>  #> $skip_missing_cols #> [1] FALSE #>  #> $on_success #> [1] \"data\" #>  #> $on_fail #> [1] \"error\" #>  #> $fill_taxon_id #> [1] TRUE #>  #> $fill_usage_id #> [1] TRUE #>  #> $taxon_id_length #> [1] 32 #>  #> $clear_usage_id #> [1] TRUE #>  #> $clear_usage_name #> [1] TRUE #>  #> $fill_usage_name #> [1] TRUE #>  #> $remap_names #> [1] TRUE #>  #> $remap_variant #> [1] FALSE #>  #> $stamp_modified #> [1] TRUE #>  #> $strict #> [1] FALSE #>  #> $quiet #> [1] FALSE dct_options()$valid_tax_status #> [1] \"accepted, synonym, variant, NA\" do.call(dct_options, old_settings)"},{"path":"https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html","id":"dwc-is-a-standard-for-biodiversity-data","dir":"Articles","previous_headings":"","what":"DwC is a standard for biodiversity data","title":"What is DwC?","text":"According official documentation, Darwin Core standard maintained Darwin Core Maintenance Interest Group. includes glossary terms (contexts might called properties, elements, fields, columns, attributes, concepts) intended facilitate sharing information biological diversity providing identifiers, labels, definitions. Darwin Core primarily based taxa, occurrence nature documented observations, specimens, samples, related information. (emphasis added) “terms” referred typically encountered columns rectangular data (spreadsheets), scientificName (scientific name taxon), lifeStage (life stage organism observed), etc. providing controlled vocabulary clear definitions terms, DwC greatly facilitates collection sharing biological data. example, Global Biodiversity Information Facility (GBIF), synthesizes biodiversity data global scale, uses DwC. practice, given set DwC data contained archive (zip file) including multiple spreadsheets (CSV files) XML files additional metadata. spreadsheets typically include datasets like occurrences, taxonomy, collection events. DwC archive components, https://github.com/gbif/ipt/ Apache license parts DwC organism occurrence data clearly important, scope dwctaxon, focuses taxonomic data.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html","id":"features-of-the-dwc-taxon-format","dir":"Articles","previous_headings":"","what":"Features of the DwC taxon format","title":"What is DwC?","text":"terms used DwC format taxonomic data (“DwC taxon”) familiar biologists. simple example mapping taxonomic data left DwC terms right genus Sarda: Example terms DwC taxon However, peculiarities good familiar follows.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html","id":"vertically-oriented","dir":"Articles","previous_headings":"Features of the DwC taxon format","what":"Vertically oriented","title":"What is DwC?","text":"Linnaean system taxonomy organizes taxa hierarchy, may used working taxonomic data “wide” format row species, like : Indeed, DwC taxon, taxonomic levels species like genus, family, order valid terms may used. However, species valid DwC term. row DwC taxonomic database single scientific name rank, just species. typical data oriented vertically (“long” format): since genus, family, etc. valid DwC terms, can also included (applicable):","code":""},{"path":"https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html","id":"machine-and-human-friendly","dir":"Articles","previous_headings":"Features of the DwC taxon format","what":"Machine and human friendly","title":"What is DwC?","text":"browse DwC taxon terms, notice many pairs similar terms acceptedNameUsage acceptedNameUsageID, parentNameUsage parentNameUsageID, etc. used similar purposes, one value easy humans understand useful machines (computer programs). example, acceptedNameUsage accepted name synonym (e.g., Picea abies (L.) H. Karst accepted name Pinus abies L.), acceptedNameUsageID unique ID (typically, taxonID) accepted name (typically short sequence letters numbers, depends dataset). makes data format somewhat redundant, also easier human parse can see actual accepted name synonym immediately, instead look taxonID. hand, scientificName can include duplicates (rare cases name published twice, etc.), referring accepted name unique ID safer problem computer. can see works example dataset comes dwctaxon, dct_filmies: , Trichomanes crassum Copel. synonym Cephalomanes crassum (Copel.) M. G. Price (notice acceptedNameUsageID Trichomanes crassum Copel. matches taxonID Cephalomanes crassum (Copel.) M. G. Price). dataset, acceptedNameUsageID used, valid add column acceptedNameUsage. learn , please see vignette(\"editing\").","code":"library(dwctaxon) head(dct_filmies) #> # A tibble: 6 × 5 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             #>   <chr>    <chr>               <chr>           <chr>     <chr>                                      #> 1 54115096 NA                  accepted        species   Cephalomanes atrovirens Presl              #> 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                 #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (Copel.) M. G. Price  #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            #> 5 54115098 NA                  accepted        species   Cephalomanes densinervium (Copel.) Copel.  #> 6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch"},{"path":"https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html","id":"extensible","dir":"Articles","previous_headings":"Features of the DwC taxon format","what":"Extensible","title":"What is DwC?","text":"many terms listed DwC taxon documentation – 37 count! However, unlikely given taxonomic database uses ; fact, ’ve encountered use subset terms, none strictly required. practice typically want least scientificName (scientific name taxon, including author known) taxonID (unique identifier row dataset). Furthermore, terms likely restricted vocabularies. example, given dataset may use limited set words describe taxonomicStatus like “accepted”, “synonym”, “doubtful”. contrast term (nearly) anything, like scientificName. DwC provide official set vocabularies; left database manager determine . One feature dwctaxon verify values want allow used given term. learn , please see vignette(\"validation\"). qualities make DwC taxon format flexible, can meet needs dataset hand. dwctaxon functions try provide sensible defaults, may need adjusted appropriately.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Joel H. Nitta. Author, maintainer, copyright holder. Wataru Iwasaki. Contributor. Collin Schwantes. Reviewer.            Collin reviewed package (v. 1.0.0.9000) rOpenSci, see <https://github.com/ropensci/software-review/issues/574> Stephen Formel. Reviewer.            Stephen reviewed package (v. 1.0.0.9000) rOpenSci, see <https://github.com/ropensci/software-review/issues/574>","code":""},{"path":"https://docs.ropensci.org/dwctaxon/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Nitta Iwasaki (2023). dwctaxon R package working Darwin Core Taxon data. https://github.com/ropensci/dwctaxon","code":"@Manual{,   title = {The dwctaxon R package for working with Darwin Core Taxon data},   author = {Joel H. Nitta and Wataru Iwasaki},   year = {2023},   url = {https://github.com/ropensci/dwctaxon}, }"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"dwctaxon-","dir":"","previous_headings":"","what":"Tools for Working with Darwin Core Taxon Data in R","title":"Tools for Working with Darwin Core Taxon Data in R","text":"goal dwctaxon facilitate working Darwin Core Taxon data R.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"statement-of-need","dir":"","previous_headings":"","what":"Statement of need","title":"Tools for Working with Darwin Core Taxon Data in R","text":"dwctaxon facilitates editing validating Darwin Core Taxon data. various reasons one might want . non-exhaustive list use-cases dwctaxon: maintain existing taxonomic database. prepare taxonomic database reference taxonomic name resolution, example taxastand U.Taxonstand R packages. curate taxonomic data part Darwin Core Archive. theory, dwctaxon used create taxonomic databases scratch, likely useful updating validating existing databases (R general suited data wrangling analysis opposed data entry).","code":""},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"Tools for Working with Darwin Core Taxon Data in R","text":"detailed usage examples, see vignettes: DwC? Editing DwC taxon data Validating DwC taxon data Real World Example information dwctaxon, particular using maintain reference database taxonomic name resolution, see taxastand dwctaxon: pair R packages standardizing species names Darwin Core format (BioDigiCon 2022 talk).","code":""},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tools for Working with Darwin Core Taxon Data in R","text":"stable version can installed CRAN: development version can installed r-universe github. ","code":"install.packages(\"dwctaxon\") options(repos = c(   ropensci = \"https://ropensci.r-universe.dev/\",    CRAN = \"https://cran.rstudio.com/\" )) install.packages(\"dwctaxon\", dep = TRUE) # install.packages(\"remotes\") remotes::install_github(\"ropensci/dwctaxon\")"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Tools for Working with Darwin Core Taxon Data in R","text":"First, load packages dataset work : dct_filmies taxonomic dataset filmy ferns included dwctaxon. demonstration purposes, just use first five rows: functions dwctaxon start dct_.","code":"library(tibble) # recommended for pretty printing of tibbles library(dwctaxon)  dct_filmies #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             #>    <chr>    <chr>               <chr>           <chr>     <chr>                                      #>  1 54115096 <NA>                accepted        species   Cephalomanes atrovirens Presl              #>  2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                 #>  3 54115097 <NA>                accepted        species   Cephalomanes crassum (Copel.) M. G. Price  #>  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            #>  5 54115098 <NA>                accepted        species   Cephalomanes densinervium (Copel.) Copel.  #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch #>  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    #>  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           #>  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             #> # ℹ 2,441 more rows filmies_small <- head(dct_filmies, 5)"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"edit-data","dir":"","previous_headings":"Usage","what":"Edit data","title":"Tools for Working with Darwin Core Taxon Data in R","text":"dct_add_row() adds one rows, automatically providing values taxonID. dct_modify_row() modifies row, automatically re-mapping synonyms needed. dct_fill_col() fills values columns “term” - “termID” pairs (e.g., acceptedNameUsage acceptedNameUsageID).","code":"filmies_small |>   dct_add_row(     scientificName = \"Hymenophyllum dwctaxonense Nitta\",     taxonomicStatus = \"accepted\"   ) #> # A tibble: 6 × 6 #>   taxonID                          acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified          #>   <chr>                            <chr>               <chr>           <chr>     <chr>                                     <chr>             #> 1 54115096                         <NA>                accepted        species   Cephalomanes atrovirens Presl             <NA>              #> 2 54133783                         54115097            synonym         species   Trichomanes crassum Copel.                <NA>              #> 3 54115097                         <NA>                accepted        species   Cephalomanes crassum (Copel.) M. G. Price <NA>              #> 4 54133784                         54115098            synonym         species   Trichomanes densinervium Copel.           <NA>              #> 5 54115098                         <NA>                accepted        species   Cephalomanes densinervium (Copel.) Copel. <NA>              #> 6 193e2011c8ace0ed138af91f41a335cc <NA>                accepted        <NA>      Hymenophyllum dwctaxonense Nitta          2024-02-02 20:11… # Change C. densinervium to a synonym of C. crassum filmies_small |>   dct_modify_row(     scientificName = \"Cephalomanes densinervium (Copel.) Copel.\",     taxonomicStatus = \"synonym\",     acceptedNameUsage = \"Cephalomanes crassum (Copel.) M. G. Price\"   ) #> # A tibble: 5 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                   #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                      #> 1 54115096 <NA>                accepted        species   Cephalomanes atrovirens Presl             <NA>                       #> 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                <NA>                       #> 3 54115097 <NA>                accepted        species   Cephalomanes crassum (Copel.) M. G. Price <NA>                       #> 4 54133784 54115097            synonym         species   Trichomanes densinervium Copel.           2024-02-02 20:11:18.52043  #> 5 54115098 54115097            synonym         species   Cephalomanes densinervium (Copel.) Copel. 2024-02-02 20:11:18.488248 # Fill-in the acceptedNameUsage column with scientific names filmies_small |>   dct_fill_col(     fill_to = \"acceptedNameUsage\",     fill_from = \"scientificName\",     match_to = \"taxonID\",     match_from = \"acceptedNameUsageID\"   ) #> # A tibble: 5 × 7 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            acceptedNameUsage                modified #>   <chr>    <chr>               <chr>           <chr>     <chr>                                     <chr>                            <chr>    #> 1 54115096 <NA>                accepted        species   Cephalomanes atrovirens Presl             <NA>                             2024-02… #> 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                Cephalomanes crassum (Copel.) M… 2024-02… #> 3 54115097 <NA>                accepted        species   Cephalomanes crassum (Copel.) M. G. Price <NA>                             2024-02… #> 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           Cephalomanes densinervium (Cope… 2024-02… #> 5 54115098 <NA>                accepted        species   Cephalomanes densinervium (Copel.) Copel. <NA>                             2024-02…"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"validate-data","dir":"","previous_headings":"Usage","what":"Validate data","title":"Tools for Working with Darwin Core Taxon Data in R","text":"dct_validate() main function validation, automatically conducts series checks. individual checks can run dct_check_*() functions. dct_filmies dataset already well-formatted, pass validation: demonstration purposes, let’s mess data: default, dct_validate() stop error first check fails: may useful get overview checks failed. can done setting on_fail \"summary\":","code":"# Default behavior is to return the original dataset if checks pass # For this example, return TRUE instead dct_validate(dct_filmies, on_success = \"logical\") #> [1] TRUE # Start by duplicating some data filmies_dirty <- rbind(head(dct_filmies), head(dct_filmies, 2)) # Replace some values of `acceptedNameUsageID` with random letters filmies_dirty$acceptedNameUsageID[sample(1:8, 5)] <- sample(letters, 5) dct_validate(filmies_dirty) #> Error: check_taxon_id failed #>    taxonID detected with duplicated value #>    Bad taxonID: 54115096, 54133783 dct_validate(filmies_dirty, on_fail = \"summary\") #> Warning: taxonID detected with duplicated value #> Warning: taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name. #> Warning: scientificName detected with duplicated value #> # A tibble: 9 × 5 #>   taxonID  acceptedNameUsageID scientificName                             error                                    check          #>   <chr>    <chr>               <chr>                                      <glue>                                   <chr>          #> 1 54115096 b                   Cephalomanes atrovirens Presl              taxonID detected whose acceptedNameUs... check_mapping  #> 2 54133783 k                   Trichomanes crassum Copel.                 taxonID detected whose acceptedNameUs... check_mapping  #> 3 54115097 s                   Cephalomanes crassum (Copel.) M. G. Price  taxonID detected whose acceptedNameUs... check_mapping  #> 4 54133786 n                   Cephalomanes curvatum (J. Sm.) V. D. Bosch taxonID detected whose acceptedNameUs... check_mapping  #> 5 54133783 p                   Trichomanes crassum Copel.                 taxonID detected whose acceptedNameUs... check_mapping  #> 6 54115096 <NA>                Cephalomanes atrovirens Presl              scientificName detected with duplicat... check_sci_name #> 7 54133783 <NA>                Trichomanes crassum Copel.                 scientificName detected with duplicat... check_sci_name #> 8 54115096 <NA>                <NA>                                       taxonID detected with duplicated value   check_taxon_id #> 9 54133783 <NA>                <NA>                                       taxonID detected with duplicated value   check_taxon_id"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"piping","dir":"","previous_headings":"Usage","what":"Piping","title":"Tools for Working with Darwin Core Taxon Data in R","text":"functions dwctaxon take dataframe first argument return dataframe default, “pipe-friendly” can chained together: ’s often good idea include dct_validate() end chain make sure modified taxonomic database still correctly formatted.","code":"dct_filmies |>   dct_modify_row(     taxonID = \"54133783\",     taxonomicStatus = \"accepted\"   ) |>   dct_add_row(     scientificName = \"Hymenophyllum dwctaxonense Nitta\",     taxonomicStatus = \"accepted\"   ) |>   dct_validate() #> # A tibble: 2,452 × 6 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             modified                   #>    <chr>    <chr>               <chr>           <chr>     <chr>                                      <chr>                      #>  1 54115096 <NA>                accepted        species   Cephalomanes atrovirens Presl              <NA>                       #>  2 54133783 <NA>                accepted        species   Trichomanes crassum Copel.                 2024-02-02 20:11:18.650982 #>  3 54115097 <NA>                accepted        species   Cephalomanes crassum (Copel.) M. G. Price  <NA>                       #>  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            <NA>                       #>  5 54115098 <NA>                accepted        species   Cephalomanes densinervium (Copel.) Copel.  <NA>                       #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch <NA>                       #>  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    <NA>                       #>  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           <NA>                       #>  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        <NA>                       #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             <NA>                       #> # ℹ 2,442 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"citing-this-package","dir":"","previous_headings":"","what":"Citing this package","title":"Tools for Working with Darwin Core Taxon Data in R","text":"use package, please cite !","code":"Nitta, JH and Iwasaki, W (2024). dwctaxon, an R package for editing and validating taxonomic data in Darwin Core format. Journal of Open Source Software, 9(93), 6215, https://doi.org/10.21105/joss.06215"},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Tools for Working with Darwin Core Taxon Data in R","text":"Contributions package welcome! Please see Contribution Guide Code Conduct.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"note-to-developers","dir":"","previous_headings":"","what":"Note to developers","title":"Tools for Working with Darwin Core Taxon Data in R","text":"roxyglobals used maintain R/globals.R, available CRAN. need install package github use @autoglobal @global roxygen tags develop functions globals.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/index.html","id":"licenses","dir":"","previous_headings":"","what":"Licenses","title":"Tools for Working with Darwin Core Taxon Data in R","text":"Code: MIT License Data: dct_filmies: Modified data downloaded Catalog Life Creative Commons Attribution (CC ) 4.0 license. dct_terms: Modified data downloaded TDWG Darwin Core Creative Commons Attribution (CC )4.0 license. Images: DwC archive components image: Copied GBIF Integrated Publishing Toolkit (IPT) Apache license","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":null,"dir":"Reference","previous_headings":"","what":"Add row(s) to a taxonomic database — dct_add_row","title":"Add row(s) to a taxonomic database — dct_add_row","text":"Add one rows taxonomic database Darwin Core (DwC) format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add row(s) to a taxonomic database — dct_add_row","text":"","code":"dct_add_row(   tax_dat,   taxonID = NULL,   scientificName = NULL,   taxonomicStatus = NULL,   acceptedNameUsageID = NULL,   acceptedNameUsage = NULL,   new_dat = NULL,   fill_taxon_id = dct_options()$fill_taxon_id,   fill_usage_id = dct_options()$fill_usage_id,   taxon_id_length = dct_options()$taxon_id_length,   stamp_modified = dct_options()$stamp_modified,   strict = dct_options()$strict,   ... )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add row(s) to a taxonomic database — dct_add_row","text":"tax_dat Dataframe; taxonomic database DwC format. taxonID Character numeric vector; values add taxonID column. Ignored new_dat NULL. scientificName Character vector; values add scientificName column. Ignored new_dat NULL. taxonomicStatus Character vector; values add taxonomicStatus column. Ignored new_dat NULL. acceptedNameUsageID Character numeric vector; values add acceptedNameUsageID column. Ignored new_dat NULL. acceptedNameUsage Character vector; values add acceptedNameUsage column. Ignored new_dat NULL. new_dat dataframe including columns corresponding one arguments, except tax_dat. DwC terms can also included additional columns. rows new_dat appended input data (tax_dat). fill_taxon_id Logical vector length 1; taxon_id provided, values taxonID column filled generating automatically scientificName? taxonID column yet exist created. Default TRUE. fill_usage_id Logical vector length 1; usage_id provided, values acceptedNameUsageID column filled matching acceptedNameUsage scientificName? acceptedNameUsageID column yet exist created. Default TRUE. taxon_id_length Numeric vector length 1; many characters included automatically generated values taxonID? Must 1 32, inclusive. Default 32. stamp_modified Logical vector length 1; modified column newly created modified row include timestamp date time creation/modification? modified column yet exist created. Default TRUE. strict Logical vector length 1; taxonomic checks run updated taxonomic database? Default FALSE. ... Additional data add, specified sets named character numeric vectors; e.g., parentNameUsageID = \"6SH4\". name must valid column name data DwC format. Ignored new_dat NULL.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add row(s) to a taxonomic database — dct_add_row","text":"Dataframe; taxonomic database DwC format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add row(s) to a taxonomic database — dct_add_row","text":"fill_taxon_id fill_usage_id act newly added data (fill columns tax_dat). \"taxonID\" provided new row fill_taxon_id TRUE, value taxonID automatically generated md5 hash digest scientific name. modify settings used validation strict TRUE, use dct_options().","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_add_row.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add row(s) to a taxonomic database — dct_add_row","text":"","code":"tibble::tibble(   taxonID = \"123\",   scientificName = \"Foogenus barspecies\",   acceptedNameUsageID = NA_character_,   taxonomicStatus = \"accepted\" ) |>   dct_add_row(     scientificName = \"Foogenus barspecies var. bla\",     parentNameUsageID = \"123\",     nameAccordingTo = \"me\",     strict = TRUE   ) #> # A tibble: 2 × 7 #>   taxonID   scientificName acceptedNameUsageID taxonomicStatus parentNameUsageID #>   <chr>     <chr>          <chr>               <chr>           <chr>             #> 1 123       Foogenus bars… NA                  accepted        NA                #> 2 cfedfbbb… Foogenus bars… NA                  NA              123               #> # ℹ 2 more variables: nameAccordingTo <chr>, modified <chr>"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Check mapping of usage taxonomic IDs — dct_check_mapping","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"Check values terms like 'acceptedUsageID' map properly taxonID Darwin Core (DwC) taxonomic data.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"","code":"dct_check_mapping(   tax_dat,   on_fail = dct_options()$on_fail,   on_success = dct_options()$on_success,   col_select = \"acceptedNameUsageID\",   quiet = dct_options()$quiet )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"tax_dat Dataframe; taxonomic database DwC format. on_fail Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". on_success Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". col_select Character vector length 1; name column (DwC term) check. Default \"acceptedNameUsageID\". quiet Logical vector length 1; warnings silenced? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"Depends result check values on_fail on_success: check passes on_success \"logical\", return TRUE check passes on_success \"data\", return input dataframe check fails on_fail \"error\", return error check fails on_fail \"summary\", issue warning return dataframe summary reasons failure","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"following rules enforced: Value taxonID may identical selected column within single row (words, name accepted name, parent taxon, basionym). Every value selected column must corresponding taxonID. col_select can take one following values: \"acceptedNameUsageID\": taxonID corresponding accepted name (synonym). \"parentNameUsageID\": taxonID corresponding immediate parent taxon name (example, species, genus). \"originalNameUsageID\": taxonID corresponding basionym name.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_mapping.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check mapping of usage taxonomic IDs — dct_check_mapping","text":"","code":"# The bad data has an acceptedNameUsageID (third row, \"4\") that lacks a # corresponding taxonID bad_dat <- tibble::tribble(   ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,   \"1\", NA, \"accepted\", \"Species foo\",   \"2\", \"1\", \"synonym\", \"Species bar\",   \"3\", \"4\", \"synonym\", \"Species bat\" )  dct_check_mapping(bad_dat, on_fail = \"summary\", quiet = TRUE) #> # A tibble: 1 × 5 #>   taxonID acceptedNameUsageID scientificName error                         check #>   <chr>   <chr>               <chr>          <glue>                        <chr> #> 1 3       4                   Species bat    taxonID detected whose accep… chec…"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Check scientificName — dct_check_sci_name","title":"Check scientificName — dct_check_sci_name","text":"Check correctly formatted scientificName column Darwin Core taxonomic data.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check scientificName — dct_check_sci_name","text":"","code":"dct_check_sci_name(   tax_dat,   on_fail = dct_options()$on_fail,   on_success = dct_options()$on_success,   quiet = dct_options()$quiet )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check scientificName — dct_check_sci_name","text":"tax_dat Dataframe; taxonomic database DwC format. on_fail Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". on_success Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". quiet Logical vector length 1; warnings silenced? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check scientificName — dct_check_sci_name","text":"Depends result check values on_fail on_success: check passes on_success \"logical\", return TRUE check passes on_success \"data\", return input dataframe check fails on_fail \"error\", return error check fails on_fail \"summary\", issue warning return dataframe summary reasons failure","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check scientificName — dct_check_sci_name","text":"following rules enforced: scientificName may missing (NA) scientificName must unique","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_sci_name.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check scientificName — dct_check_sci_name","text":"","code":"dct_check_sci_name(   data.frame(scientificName = NA_character_),   on_fail = \"summary\", quiet = TRUE ) #> # A tibble: 1 × 3 #>   scientificName check          error                                      #>   <chr>          <chr>          <chr>                                      #> 1 NA             check_sci_name scientificName detected with missing value  dct_check_sci_name(data.frame(scientificName = \"a\")) #>   scientificName #> 1              a"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"Check taxonomicStatus within valid values Darwin Core taxonomic data","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"","code":"dct_check_tax_status(   tax_dat,   on_fail = dct_options()$on_fail,   on_success = dct_options()$on_success,   valid_tax_status = dct_options()$valid_tax_status,   quiet = dct_options()$quiet )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"tax_dat Dataframe; taxonomic database DwC format. on_fail Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". on_success Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". valid_tax_status Character vector length 1; valid values taxonomicStatus. value must separated comma. Default accepted, synonym, variant, NA. \"NA\" indicates missing (NA) values valid. Case-sensitive. (see Examples). quiet Logical vector length 1; warnings silenced? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"Depends result check values on_fail on_success: check passes on_success \"logical\", return TRUE check passes on_success \"data\", return input dataframe check fails on_fail \"error\", return error check fails on_fail \"summary\", issue warning return dataframe summary reasons failure","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"https://dwc.tdwg.org/terms/#dwc:taxonomicStatus","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_tax_status.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check that taxonomicStatus is within valid values in\nDarwin Core taxonomic data — dct_check_tax_status","text":"","code":"# The bad data has an taxonomicStatus (third row, \"foo\") that is not # a valid value bad_dat <- tibble::tribble(   ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,   \"1\", NA, \"accepted\", \"Species foo\",   \"2\", \"1\", \"synonym\", \"Species bar\",   \"3\", NA, \"foo\", \"Species bat\" )  dct_check_tax_status(bad_dat, on_fail = \"summary\", quiet = TRUE) #> # A tibble: 1 × 5 #>   taxonID scientificName taxonomicStatus error                             check #>   <chr>   <chr>          <chr>           <chr>                             <chr> #> 1 3       Species bat    foo             taxonID detected whose taxonomic… chec…  # Example of setting valid values of taxonomicStatus via dct_options()  # First store existing settings, including any changes made by the user old_settings <- dct_options()  # Change options for valid_tax_status dct_options(valid_tax_status = \"provisionally accepted, synonym, NA\") tibble::tribble(   ~taxonID, ~acceptedNameUsageID, ~taxonomicStatus, ~scientificName,   \"1\", NA, \"provisionally accepted\", \"Species foo\",   \"2\", \"1\", \"synonym\", \"Species bar\",   \"3\", NA, NA, \"Strange name\" ) |>   dct_check_tax_status() #> # A tibble: 3 × 4 #>   taxonID acceptedNameUsageID taxonomicStatus        scientificName #>   <chr>   <chr>               <chr>                  <chr>          #> 1 1       NA                  provisionally accepted Species foo    #> 2 2       1                   synonym                Species bar    #> 3 3       NA                  NA                     Strange name    # Reset options to those before this example was run do.call(dct_options, old_settings)"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Check taxonID — dct_check_taxon_id","title":"Check taxonID — dct_check_taxon_id","text":"Check correctly formatted taxonID column Darwin Core taxonomic data.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check taxonID — dct_check_taxon_id","text":"","code":"dct_check_taxon_id(   tax_dat,   on_fail = dct_options()$on_fail,   on_success = dct_options()$on_success,   quiet = dct_options()$quiet )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check taxonID — dct_check_taxon_id","text":"tax_dat Dataframe; taxonomic database DwC format. on_fail Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". on_success Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". quiet Logical vector length 1; warnings silenced? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check taxonID — dct_check_taxon_id","text":"Depends result check values on_fail on_success: check passes on_success \"logical\", return TRUE check passes on_success \"data\", return input dataframe check fails on_fail \"error\", return error check fails on_fail \"summary\", issue warning return dataframe summary reasons failure","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check taxonID — dct_check_taxon_id","text":"following rules enforced: taxonID may missing (NA) taxonID must unique","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_check_taxon_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check taxonID — dct_check_taxon_id","text":"","code":"dct_check_taxon_id(   data.frame(taxonID = NA_character_),   on_fail = \"summary\", quiet = TRUE ) #> # A tibble: 1 × 3 #>   taxonID error                               check          #>   <chr>   <chr>                               <chr>          #> 1 NA      taxonID detected with missing value check_taxon_id dct_check_taxon_id(data.frame(taxonID = 1)) #>   taxonID #> 1       1"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":null,"dir":"Reference","previous_headings":"","what":"Drop row(s) of a taxonomic database — dct_drop_row","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"Drop one rows taxonomic database Darwin Core (DwC) format taxonID scientificName.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"","code":"dct_drop_row(tax_dat, taxonID = NULL, scientificName = NULL)"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"tax_dat Dataframe; taxonomic database DwC format. taxonID Character numeric vector; taxonID row(s) dropped. scientificName Character vector; scientificName row(s) dropped.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"Dataframe; taxonomic database DwC format","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"works values taxonID scientificName unique non-missing taxonomic database (tax_dat). Either taxonID scientificName provided, .","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_drop_row.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Drop row(s) of a taxonomic database — dct_drop_row","text":"","code":"# Can drop rows by scientificName or taxonID dct_filmies |>   dct_drop_row(scientificName = \"Cephalomanes atrovirens Presl\") #> # A tibble: 2,450 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54133783 54115097            synonym         species   Trichomanes crassum C… #>  2 54115097 NA                  accepted        species   Cephalomanes crassum … #>  3 54133784 54115098            synonym         species   Trichomanes densinerv… #>  4 54115098 NA                  accepted        species   Cephalomanes densiner… #>  5 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  6 54133787 54115100            synonym         species   Cephalomanes javanica… #>  7 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  8 54133789 54115100            synonym         species   Cephalomanes zollinge… #>  9 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> 10 54133791 54115100            synonym         species   Lacostea rhomboidea P… #> # ℹ 2,440 more rows  dct_filmies |>   dct_drop_row(taxonID = \"54133783\") #> # A tibble: 2,450 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Cephalomanes atrovire… #>  2 54115097 NA                  accepted        species   Cephalomanes crassum … #>  3 54133784 54115098            synonym         species   Trichomanes densinerv… #>  4 54115098 NA                  accepted        species   Cephalomanes densiner… #>  5 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  6 54133787 54115100            synonym         species   Cephalomanes javanica… #>  7 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  8 54133789 54115100            synonym         species   Cephalomanes zollinge… #>  9 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> 10 54133791 54115100            synonym         species   Lacostea rhomboidea P… #> # ℹ 2,440 more rows  # Can drop multiple rows at once by providing multiple values for # scientificName or taxonID dct_filmies |>   dct_drop_row(     scientificName = c(       \"Cephalomanes atrovirens Presl\",       \"Trichomanes crassum Copel.\"     )   ) #> # A tibble: 2,449 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115097 NA                  accepted        species   Cephalomanes crassum … #>  2 54133784 54115098            synonym         species   Trichomanes densinerv… #>  3 54115098 NA                  accepted        species   Cephalomanes densiner… #>  4 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  5 54133787 54115100            synonym         species   Cephalomanes javanica… #>  6 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  7 54133789 54115100            synonym         species   Cephalomanes zollinge… #>  8 54133790 54115100            synonym         species   Lacostea javanica (Bl… #>  9 54133791 54115100            synonym         species   Lacostea rhomboidea P… #> 10 54133792 54115100            synonym         species   Lacostea zollingeri (… #> # ℹ 2,439 more rows  dct_filmies |>   dct_drop_row(     taxonID = c(       \"54133783\", \"54133783\"     )   ) #> # A tibble: 2,450 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Cephalomanes atrovire… #>  2 54115097 NA                  accepted        species   Cephalomanes crassum … #>  3 54133784 54115098            synonym         species   Trichomanes densinerv… #>  4 54115098 NA                  accepted        species   Cephalomanes densiner… #>  5 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  6 54133787 54115100            synonym         species   Cephalomanes javanica… #>  7 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  8 54133789 54115100            synonym         species   Cephalomanes zollinge… #>  9 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> 10 54133791 54115100            synonym         species   Lacostea rhomboidea P… #> # ℹ 2,440 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":null,"dir":"Reference","previous_headings":"","what":"Fill a column of a taxonomic database — dct_fill_col","title":"Fill a column of a taxonomic database — dct_fill_col","text":"Fill column taxonomic database Darwin Core (DwC) format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fill a column of a taxonomic database — dct_fill_col","text":"","code":"dct_fill_col(   tax_dat,   fill_to = \"acceptedNameUsage\",   fill_from = \"scientificName\",   match_to = \"taxonID\",   match_from = \"acceptedNameUsageID\",   stamp_modified = dct_options()$stamp_modified )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fill a column of a taxonomic database — dct_fill_col","text":"tax_dat Dataframe; taxonomic database DwC format. fill_to Character vector length 1; name column fill. column yet exist created. fill_from Character vector length 1; name column copy values filling. match_to Character vector length 1; name column match . match_from Character vector length 1; name column match . stamp_modified Logical vector length 1; modified column newly created modified row include timestamp date time creation/modification? modified column yet exist created. Default TRUE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fill a column of a taxonomic database — dct_fill_col","text":"Dataframe; taxonomic database DwC format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fill a column of a taxonomic database — dct_fill_col","text":"Several terms (columns) DwC format come pairs \"term\" \"termID\"; example, \"acceptedNameUsage\" \"acceptedNameUsageID\", first value human-readable form (case, scientific name accepted taxon) second value used machine (case, taxonID accepted taxon). pairs include \"parentNameUsage\" \"parentNameUsageID\", \"scientificName\" \"scientificNameID\", etc. None required used given DwC dataset. Often updating data, user may fill one value (e.g., \"acceptedNameUsage\" \"acceptedNameUsageID\"), . purpose dct_fill_col() fill missing column. match_from match_to used locate values used filling cell. values match_to column must unique. default settings fill acceptedNameUsage values scientificName matching acceptedNameUsageID taxonID (see Example). adding timestamps stamp_modified, row differs original data (tax_dat) considered modified. includes new column added, case rows considered modified.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_fill_col.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fill a column of a taxonomic database — dct_fill_col","text":"","code":"# Fill acceptedNameUsage with values from scientificName by # matching acceptedNameUsageID to taxonID (head(dct_filmies, 5)) |>   dct_fill_col(     fill_to = \"acceptedNameUsage\",     fill_from = \"scientificName\",     match_to = \"taxonID\",     match_from = \"acceptedNameUsageID\"   ) #> # A tibble: 5 × 7 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName          #>   <chr>    <chr>               <chr>           <chr>     <chr>                   #> 1 54115096 NA                  accepted        species   Cephalomanes atroviren… #> 2 54133783 54115097            synonym         species   Trichomanes crassum Co… #> 3 54115097 NA                  accepted        species   Cephalomanes crassum (… #> 4 54133784 54115098            synonym         species   Trichomanes densinervi… #> 5 54115098 NA                  accepted        species   Cephalomanes densinerv… #> # ℹ 2 more variables: acceptedNameUsage <chr>, modified <chr>"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":null,"dir":"Reference","previous_headings":"","what":"Taxonomic data of filmy ferns — dct_filmies","title":"Taxonomic data of filmy ferns — dct_filmies","text":"Taxonomic data filmy ferns (family Hymenophyllaceae) Darwin Core format. Non-ASCII characters converted ASCII, author names may expected. Meant demonstration purposes , formal data analysis.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Taxonomic data of filmy ferns — dct_filmies","text":"","code":"dct_filmies"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Taxonomic data of filmy ferns — dct_filmies","text":"Dataframe (tibble), 2451 rows 5 columns. details data format, see https://dwc.tdwg.org/terms/#taxon.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Taxonomic data of filmy ferns — dct_filmies","text":"https://www.catalogueoflife.org/","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Taxonomic data of filmy ferns — dct_filmies","text":"Modified data downloaded Catalog Life Creative Commons Attribution (CC ) 4.0 license.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Taxonomic data of filmy ferns — dct_filmies","text":"","code":"dct_filmies #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Cephalomanes atrovire… #>  2 54133783 54115097            synonym         species   Trichomanes crassum C… #>  3 54115097 NA                  accepted        species   Cephalomanes crassum … #>  4 54133784 54115098            synonym         species   Trichomanes densinerv… #>  5 54115098 NA                  accepted        species   Cephalomanes densiner… #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  7 54133787 54115100            synonym         species   Cephalomanes javanica… #>  8 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  9 54133789 54115100            synonym         species   Cephalomanes zollinge… #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> # ℹ 2,441 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":null,"dir":"Reference","previous_headings":"","what":"Modify row(s) of a taxonomic database — dct_modify_row","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"Modify one rows taxonomic database Darwin Core (DwC) format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"","code":"dct_modify_row(   tax_dat,   taxonID = NULL,   scientificName = NULL,   taxonomicStatus = NULL,   acceptedNameUsageID = NULL,   acceptedNameUsage = NULL,   clear_usage_id = dct_options()$clear_usage_id,   clear_usage_name = dct_options()$clear_usage_name,   fill_usage_name = dct_options()$fill_usage_name,   remap_names = dct_options()$remap_names,   remap_variant = dct_options()$remap_variant,   stamp_modified = dct_options()$stamp_modified,   strict = dct_options()$strict,   quiet = dct_options()$quiet,   args_tbl = NULL,   ... )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"tax_dat Dataframe; taxonomic database DwC format. taxonID Character numeric vector length 1; taxonID row modified (selected row). scientificName Character vector length 1; scientificName row modified taxonID NULL, scientificName assign selected row taxonID provided (see Details). taxonomicStatus Character vector length 1; taxonomicStatus assign selected row. acceptedNameUsageID Character numeric vector length 1; acceptedNameUsageID assign selected row. acceptedNameUsage Character vector length 1; acceptedNameUsage assign selected row. clear_usage_id Logical vector length 1; acceptedNameUsageID selected row set NA word \"accepted\" detected tax_status (case-sensitive)? Default TRUE. clear_usage_name Logical vector length 1; acceptedNameUsageID selected row set NA word \"accepted\" detected tax_status (case-sensitive)? Default TRUE. fill_usage_name Logical vector length 1; acceptedNameUsage selected row set scientificName corresponding acceptedNameUsageID? Default TRUE. remap_names Logical vector length 1; acceptedNameUsageID updated (remapped) rows acceptedNameUsageID taxonID row modified? Default TRUE. remap_variant remap_names, applies specifically rows taxonomicStatus \"variant\". Default FALSE. stamp_modified Logical vector length 1; modified column newly created modified row include timestamp date time creation/modification? modified column yet exist created. Default TRUE. strict Logical vector length 1; taxonomic checks run updated taxonomic database? Default FALSE.. quiet Logical vector length 1; warnings silenced? Default FALSE.. args_tbl dataframe including columns corresponding one arguments, except tax_dat. case, input taxonomic database modified sequentially row input args_tbl. DwC terms can also included additional columns, similar using ... modify single row. ... DwC terms modify, specified sets named values. element vector must name corresponding valid DwC term; see dct_terms.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"Dataframe; taxonomic database DwC format","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"taxonID used identify row(s) modify modified. scientificName can used way taxonID provided (long scientificName matches single row). taxonID scientificName provided, scientificName assigned scientificName row identified taxonID, replacing value already exists. acceptedNameUsageID acceptedNameUsage must match existing values acceptedNameUsageID acceptedNameUsage input data (tax_dat). default settings, either can used filled automatically (fill_usage_id fill_usage_name TRUE). arguments provided DwC terms assigned selected row (.e., modify row). remap_names TRUE (default) acceptedNameUsageID provided, names acceptedNameUsageID matching taxonID selected row (.e., synonyms row) also acceptedNameUsageID replaced new acceptedNameUsageID. behavior applied names taxonomicStatus \"variant\" default, can turned names remap_variant. clear_usage_id clear_usage_name TRUE taxonomicStatus includes word \"accepted\", acceptedNameUsageID acceptedNameUsage set NA respectively, regardless values acceptedNameUsageID, acceptedNameUsage, fill_usage_name. Can either modify single row input taxonomic database argument supplied vector length 1, can apply set changes taxonomic database input supplied dataframe via args_tbl.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_modify_row.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Modify row(s) of a taxonomic database — dct_modify_row","text":"","code":"# Swap the accepted / synonym status of # Cephalomanes crassum (Copel.) M. G. Price # and Trichomanes crassum Copel. dct_filmies |>   dct_modify_row(     scientificName = \"Cephalomanes crassum (Copel.) M. G. Price\",     taxonomicStatus = \"synonym\",     acceptedNameUsage = \"Trichomanes crassum Copel.\"   ) |>   dct_modify_row(     scientificName = \"Trichomanes crassum Copel.\",     taxonomicStatus = \"accepted\"   ) |>   dct_validate(     check_tax_status = FALSE,     check_mapping_accepted_status = FALSE,     check_sci_name = FALSE   ) #> # A tibble: 2,451 × 6 #>    taxonID acceptedNameUsageID taxonomicStatus taxonRank scientificName modified #>    <chr>   <chr>               <chr>           <chr>     <chr>          <chr>    #>  1 541150… NA                  accepted        species   Cephalomanes … NA       #>  2 541337… NA                  accepted        species   Trichomanes c… 2024-03… #>  3 541150… 54133783            synonym         species   Cephalomanes … 2024-03… #>  4 541337… 54115098            synonym         species   Trichomanes d… NA       #>  5 541150… NA                  accepted        species   Cephalomanes … NA       #>  6 541337… 54115100            synonym         species   Cephalomanes … NA       #>  7 541337… 54115100            synonym         species   Cephalomanes … NA       #>  8 541337… 54115100            synonym         species   Cephalomanes … NA       #>  9 541337… 54115100            synonym         species   Cephalomanes … NA       #> 10 541337… 54115100            synonym         species   Lacostea java… NA       #> # ℹ 2,441 more rows # Sometimes changing one name will affect others, if they map # to the new synonym dct_modify_row(   tax_dat = dct_filmies |> head(),   scientificName = \"Cephalomanes crassum (Copel.) M. G. Price\",   taxonomicStatus = \"synonym\",   acceptedNameUsage = \"Cephalomanes densinervium (Copel.) Copel.\" ) #> # A tibble: 6 × 6 #>   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName modified #>   <chr>    <chr>               <chr>           <chr>     <chr>          <chr>    #> 1 54115096 NA                  accepted        species   Cephalomanes … NA       #> 2 54133783 54115098            synonym         species   Trichomanes c… 2024-03… #> 3 54115097 54115098            synonym         species   Cephalomanes … 2024-03… #> 4 54133784 54115098            synonym         species   Trichomanes d… NA       #> 5 54115098 NA                  accepted        species   Cephalomanes … NA       #> 6 54133786 54115100            synonym         species   Cephalomanes … NA       # Apply a set of changes library(tibble) updates <- tibble(   scientificName = c(     \"Cephalomanes atrovirens Presl\",     \"Cephalomanes crassum (Copel.) M. G. Price\"   ),   taxonomicStatus = \"synonym\",   acceptedNameUsage = \"Trichomanes crassum Copel.\" ) dct_filmies |>   dct_modify_row(args_tbl = updates) |>   dct_modify_row(     scientificName = \"Trichomanes crassum Copel.\",     taxonomicStatus = \"accepted\"   ) #> # A tibble: 2,451 × 6 #>    taxonID acceptedNameUsageID taxonomicStatus taxonRank scientificName modified #>    <chr>   <chr>               <chr>           <chr>     <chr>          <chr>    #>  1 541150… 54133783            synonym         species   Cephalomanes … NA       #>  2 541337… NA                  accepted        species   Trichomanes c… 2024-03… #>  3 541150… 54133783            synonym         species   Cephalomanes … NA       #>  4 541337… 54115098            synonym         species   Trichomanes d… NA       #>  5 541150… NA                  accepted        species   Cephalomanes … NA       #>  6 541337… 54115100            synonym         species   Cephalomanes … NA       #>  7 541337… 54115100            synonym         species   Cephalomanes … NA       #>  8 541337… 54115100            synonym         species   Cephalomanes … NA       #>  9 541337… 54115100            synonym         species   Cephalomanes … NA       #> 10 541337… 54115100            synonym         species   Lacostea java… NA       #> # ℹ 2,441 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":null,"dir":"Reference","previous_headings":"","what":"Get and set function arguments via options — dct_options","title":"Get and set function arguments via options — dct_options","text":"Changes default values function arguments.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get and set function arguments via options — dct_options","text":"","code":"dct_options(reset = FALSE, ...)"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get and set function arguments via options — dct_options","text":"reset Logical vector length 1; TRUE, reset options default values. ... number argument = value pairs, left side name argument right side value. See Details Examples.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get and set function arguments via options — dct_options","text":"Nothing; used side-effect.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get and set function arguments via options — dct_options","text":"Use change default values function arguments. way, type thing time call function. arguments can set function follows:","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"validation-arguments","dir":"Reference","previous_headings":"","what":"Validation arguments","title":"Get and set function arguments via options — dct_options","text":"check_col_names: Logical vector length 1; column names required valid DwC term? Default TRUE. check_mapping_accepted_status: Logical vector length 1; rules mapping variants synonyms enforced? Default FALSE. (See dct_validate()). check_mapping_accepted: Logical vector length 1; values acceptedNameUsageID required map taxonID existing name? Default TRUE. check_mapping_original: Logical vector length 1; values originalNameUsageID required map taxonID existing name? Default TRUE. check_mapping_parent: Logical vector length 1; values parentNameUsageID required map taxonID existing name? Default TRUE. check_sci_name: Logical vector length 1; instances scientificName required non-missing unique? Default TRUE. check_status_diff: Logical vector length 1; scientific name allowed one taxonomic status? Default FALSE. check_tax_status: Logical vector length 1; taxonomic names required valid value taxonomic status (default, \"accepted\", \"synonym\", \"variant\")? Default TRUE. check_taxon_id: Logical vector length 1; instances  taxonID required non-missing unique? Default TRUE. extra_cols: Character vector; names columns allowed beyond defined DwC taxon standard. Default NULL. Providing column name(s) valid DwC taxon column(s) effect. on_fail: Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". on_success: Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". skip_missing_cols: Logical vector length 1; checks silently skipped columns inspect missing? Default FALSE. valid_tax_status: Character vector length 1; valid values taxonomicStatus. value must separated comma. Default accepted, synonym, variant, NA. \"NA\" indicates missing (NA) values valid. Case-sensitive.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"editing-arguments","dir":"Reference","previous_headings":"","what":"Editing arguments","title":"Get and set function arguments via options — dct_options","text":"clear_usage_id: Logical vector length 1; acceptedNameUsageID selected row set NA word \"accepted\" detected tax_status (case-sensitive)? Default TRUE. clear_usage_name: Logical vector length 1; acceptedNameUsage selected row set NA word \"accepted\" detected tax_status (case-sensitive)? Default TRUE. fill_taxon_id: Logical vector length 1; taxon_id provided, values taxonID column filled generating automatically scientificName? taxonID column yet exist created. Default TRUE. fill_usage_id: Logical vector length 1; usage_id provided, values acceptedNameUsageID column filled matching acceptedNameUsage scientificName? acceptedNameUsageID column yet exist created. Default TRUE. fill_usage_name: Logical vector length 1; acceptedNameUsage selected row set scientificName corresponding acceptedNameUsageID? Default TRUE. remap_names: Logical vector length 1; acceptedNameUsageID updated (remapped) rows acceptedNameUsageID taxonID row modified? Default TRUE. remap_variant: remap_names, applies specifically rows taxonomicStatus \"variant\". Default FALSE. stamp_modified: Logical vector length 1; modified column newly created modified row include timestamp date time creation/modification? modified column yet exist created. Default TRUE. taxon_id_length: Numeric vector length 1; many characters included automatically generated values taxonID? Must 1 32, inclusive. Default 32.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"general-arguments","dir":"Reference","previous_headings":"","what":"General arguments","title":"Get and set function arguments via options — dct_options","text":"quiet: Logical vector length 1; warnings silenced? Default FALSE. strict: Logical vector length 1; taxonomic checks run updated taxonomic database? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_options.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get and set function arguments via options — dct_options","text":"","code":"# Show all options dct_options() #> $check_taxon_id #> [1] TRUE #>  #> $check_tax_status #> [1] TRUE #>  #> $check_mapping_accepted #> [1] TRUE #>  #> $check_mapping_parent #> [1] TRUE #>  #> $check_mapping_original #> [1] TRUE #>  #> $check_mapping_accepted_status #> [1] FALSE #>  #> $check_sci_name #> [1] TRUE #>  #> $check_status_diff #> [1] FALSE #>  #> $check_col_names #> [1] TRUE #>  #> $valid_tax_status #> [1] \"accepted, synonym, variant, NA\" #>  #> $extra_cols #> NULL #>  #> $skip_missing_cols #> [1] FALSE #>  #> $on_success #> [1] \"data\" #>  #> $on_fail #> [1] \"error\" #>  #> $fill_taxon_id #> [1] TRUE #>  #> $fill_usage_id #> [1] TRUE #>  #> $taxon_id_length #> [1] 32 #>  #> $clear_usage_id #> [1] TRUE #>  #> $clear_usage_name #> [1] TRUE #>  #> $fill_usage_name #> [1] TRUE #>  #> $remap_names #> [1] TRUE #>  #> $remap_variant #> [1] FALSE #>  #> $stamp_modified #> [1] TRUE #>  #> $strict #> [1] FALSE #>  #> $quiet #> [1] FALSE #>   # Store existing settings, including any changes made by the user old_settings <- dct_options()  # View one option dct_options()$valid_tax_status #> [1] \"accepted, synonym, variant, NA\"  # Change one option dct_options(valid_tax_status = \"accepted, weird, whatever\") dct_options()$valid_tax_status #> [1] \"accepted, weird, whatever\"  # Reset to default values dct_options(reset = TRUE) dct_options()$valid_tax_status #> [1] \"accepted, synonym, variant, NA\"  # Multiple options may also be set at once dct_options(check_taxon_id = FALSE, check_status_diff = TRUE)  # Reset options to those before this example was run do.call(dct_options, old_settings)"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Darwin Core Taxon terms — dct_terms","title":"Darwin Core Taxon terms — dct_terms","text":"table valid Darwin Core terms. terms Taxon class record-level included.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Darwin Core Taxon terms — dct_terms","text":"","code":"dct_terms"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Darwin Core Taxon terms — dct_terms","text":"Dataframe (tibble), including two columns: group: Darwin Core term group; either \"taxon\" (terms Taxon class) \"record-level\" (terms generic might apply type record dataset.) term: Darwin Core term two additional attributes: retrieved: Date terms obtained url: URL terms obtained","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Darwin Core Taxon terms — dct_terms","text":"https://dwc.tdwg.org/terms/#taxon","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Darwin Core Taxon terms — dct_terms","text":"Modified data downloaded TDWG Darwin Core Creative Commons Attribution (CC ) 4.0 license.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Darwin Core Taxon terms — dct_terms","text":"","code":"dct_terms #> # A tibble: 47 × 2 #>    group term                #>  * <chr> <chr>               #>  1 taxon taxonID             #>  2 taxon scientificNameID    #>  3 taxon acceptedNameUsageID #>  4 taxon parentNameUsageID   #>  5 taxon originalNameUsageID #>  6 taxon nameAccordingToID   #>  7 taxon namePublishedInID   #>  8 taxon taxonConceptID      #>  9 taxon scientificName      #> 10 taxon acceptedNameUsage   #> # ℹ 37 more rows"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a taxonomic database — dct_validate","title":"Validate a taxonomic database — dct_validate","text":"Runs series automated checks taxonomic database Darwin Core (DwC) format.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a taxonomic database — dct_validate","text":"","code":"dct_validate(   tax_dat,   check_taxon_id = dct_options()$check_taxon_id,   check_tax_status = dct_options()$check_tax_status,   check_mapping_accepted = dct_options()$check_mapping_accepted,   check_mapping_parent = dct_options()$check_mapping_parent,   check_mapping_original = dct_options()$check_mapping_original,   check_mapping_accepted_status = dct_options()$check_mapping_accepted_status,   check_sci_name = dct_options()$check_sci_name,   check_status_diff = dct_options()$check_status_diff,   check_col_names = dct_options()$check_col_names,   valid_tax_status = dct_options()$valid_tax_status,   extra_cols = dct_options()$extra_cols,   on_success = dct_options()$on_success,   on_fail = dct_options()$on_fail,   skip_missing_cols = dct_options()$skip_missing_cols,   quiet = dct_options()$quiet )"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a taxonomic database — dct_validate","text":"tax_dat Dataframe; taxonomic database DwC format. check_taxon_id Logical vector length 1; instances  taxonID required non-missing unique? Default TRUE. check_tax_status Logical vector length 1; taxonomic names required valid value taxonomic status (default, \"accepted\", \"synonym\", \"variant\")? Default TRUE. check_mapping_accepted Logical vector length 1; values acceptedNameUsageID required map taxonID existing name? Default TRUE. check_mapping_parent Logical vector length 1; values parentNameUsageID required map taxonID existing name? Default TRUE. check_mapping_original Logical vector length 1; values originalNameUsageID required map taxonID existing name? Default TRUE. check_mapping_accepted_status Logical vector length 1; rules mapping variants synonyms enforced? Default FALSE. (see Details). check_sci_name Logical vector length 1; instances scientificName required non-missing unique? Default TRUE. check_status_diff Logical vector length 1; scientific name allowed one taxonomic status? Default FALSE. check_col_names Logical vector length 1; column names required valid DwC term? Default TRUE. valid_tax_status Character vector length 1; valid values taxonomicStatus. value must separated comma. Default accepted, synonym, variant, NA. \"NA\" indicates missing (NA) values valid. Case-sensitive. extra_cols Character vector; names columns allowed beyond defined DwC taxon standard. Default NULL. Providing column name(s) valid DwC taxon column(s) effect. on_success Character vector length 1, either \"logical\" \"data\". Describes check passes. Default \"data\". on_fail Character vector length 1, either \"error\" \"summary\". Describes check fails. Default \"error\". skip_missing_cols Logical vector length 1; checks silently skipped columns inspect missing? Default FALSE. quiet Logical vector length 1; warnings silenced? Default FALSE.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a taxonomic database — dct_validate","text":"Depends result check values on_fail on_success: check passes on_success \"logical\", return TRUE check passes on_success \"data\", return input dataframe check fails on_fail \"error\", return error check fails on_fail \"summary\", issue warning return dataframe summary reasons failure","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Validate a taxonomic database — dct_validate","text":"check_mapping_accepted_status check_status_diff, \"accepted\", \"synonym\", \"variant\" determined string matching taxonomicStatus; \"provisionally accepted\" counted \"accepted\", \"ambiguous synonym\" counted \"synonym\", etc. (case-sensitive). check_mapping_accepted_status, following rules enforced: Rows taxonomicStatus \"synonym\" (synonyms) must acceptedNameUsageID matching taxonID accepted name (taxonomicStatus \"accepted\") Rows taxonomicStatus \"variant\" (orthographic variants) must acceptedNameUsageID matching taxonID accepted name synonym (another variant) Rows taxonomicStatus \"accepted\" must value entered acceptedNameUsageID Rows value acceptedNameUsageID must valid value taxonomicStatus. Default settings arguments can modified dct_options() (see Examples). columns expected vectors class character, checked columns. Columns (DwC terms) names including 'ID', example 'taxonID', may character, numeric, integer.","code":""},{"path":"https://docs.ropensci.org/dwctaxon/reference/dct_validate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate a taxonomic database — dct_validate","text":"","code":"# The example dataset dct_filmies is already correctly formatted and passes # validation dct_validate(dct_filmies) #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Cephalomanes atrovire… #>  2 54133783 54115097            synonym         species   Trichomanes crassum C… #>  3 54115097 NA                  accepted        species   Cephalomanes crassum … #>  4 54133784 54115098            synonym         species   Trichomanes densinerv… #>  5 54115098 NA                  accepted        species   Cephalomanes densiner… #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  7 54133787 54115100            synonym         species   Cephalomanes javanica… #>  8 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  9 54133789 54115100            synonym         species   Cephalomanes zollinge… #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> # ℹ 2,441 more rows  # So make some bad data on purpose with a duplicated scientific name bad_dat <- dct_filmies bad_dat$scientificName[1] <- bad_dat$scientificName[2]  # The incorrectly formatted data won't pass try(   dct_validate(bad_dat) ) #> Error : check_sci_name failed #>    scientificName detected with duplicated value #>    Bad scientificName: Trichomanes crassum Copel., Trichomanes crassum Copel. #>   # It will pass if we allow duplicated scientific names though dct_validate(bad_dat, check_sci_name = FALSE) #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Trichomanes crassum C… #>  2 54133783 54115097            synonym         species   Trichomanes crassum C… #>  3 54115097 NA                  accepted        species   Cephalomanes crassum … #>  4 54133784 54115098            synonym         species   Trichomanes densinerv… #>  5 54115098 NA                  accepted        species   Cephalomanes densiner… #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  7 54133787 54115100            synonym         species   Cephalomanes javanica… #>  8 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  9 54133789 54115100            synonym         species   Cephalomanes zollinge… #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> # ℹ 2,441 more rows  # Individual checks can also be turned or off with dct_options()  # First save the current settings before making any changes old_settings <- dct_options()  # Let's allow duplicated scientific names by default dct_options(check_sci_name = FALSE)  # The data passes validation as before, but we don't have to specify # `check_sci_name = FALSE` in the function call dct_validate(bad_dat) #> # A tibble: 2,451 × 5 #>    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName         #>    <chr>    <chr>               <chr>           <chr>     <chr>                  #>  1 54115096 NA                  accepted        species   Trichomanes crassum C… #>  2 54133783 54115097            synonym         species   Trichomanes crassum C… #>  3 54115097 NA                  accepted        species   Cephalomanes crassum … #>  4 54133784 54115098            synonym         species   Trichomanes densinerv… #>  5 54115098 NA                  accepted        species   Cephalomanes densiner… #>  6 54133786 54115100            synonym         species   Cephalomanes curvatum… #>  7 54133787 54115100            synonym         species   Cephalomanes javanica… #>  8 54133788 54115100            synonym         species   Cephalomanes oblongif… #>  9 54133789 54115100            synonym         species   Cephalomanes zollinge… #> 10 54133790 54115100            synonym         species   Lacostea javanica (Bl… #> # ℹ 2,441 more rows  # Reset options to those before this example was run do.call(dct_options, old_settings)"},{"path":"https://docs.ropensci.org/dwctaxon/reference/dwctaxon-package.html","id":null,"dir":"Reference","previous_headings":"","what":"dwctaxon: Edit and Validate Darwin Core Taxon Data — dwctaxon-package","title":"dwctaxon: Edit and Validate Darwin Core Taxon Data — dwctaxon-package","text":"Edit validate taxonomic data compliance Darwin Core standards (Darwin Core 'Taxon' class https://dwc.tdwg.org/terms/#taxon).","code":""},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/reference/dwctaxon-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"dwctaxon: Edit and Validate Darwin Core Taxon Data — dwctaxon-package","text":"Maintainer: Joel H. Nitta joelnitta@gmail.com (ORCID) [copyright holder] contributors: Wataru Iwasaki (ORCID) [contributor] Collin Schwantes (Collin reviewed package (v. 1.0.0.9000) rOpenSci, see <https://github.com/ropensci/software-review/issues/574>) [reviewer] Stephen Formel (Stephen reviewed package (v. 1.0.0.9000) rOpenSci, see <https://github.com/ropensci/software-review/issues/574>) [reviewer]","code":""},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"dwctaxon-203","dir":"Changelog","previous_headings":"","what":"dwctaxon 2.0.3","title":"dwctaxon 2.0.3","text":"CRAN release: 2023-12-13","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"bug-fixes-2-0-3","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"dwctaxon 2.0.3","text":"Don’t require values reference column unique matching values, instead require matched values unique. means now possible use (example) dct_fill_col() fill acceptedNameUsageID based scientificName even scientificName contains duplicated values, long don’t match values match_from column (https://github.com/ropensci/dwctaxon/pull/97)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"documentation-2-0-3","dir":"Changelog","previous_headings":"","what":"Documentation","title":"dwctaxon 2.0.3","text":"Add documentation extra_cols option dct_options() (https://github.com/ropensci/dwctaxon/pull/99)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"cran-policies-2-0-3","dir":"Changelog","previous_headings":"","what":"CRAN policies","title":"dwctaxon 2.0.3","text":"Add check internet connection valid URL downloading files ensure compliance CRAN policy (https://github.com/ropensci/dwctaxon/pull/94)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"dwctaxon-202","dir":"Changelog","previous_headings":"","what":"dwctaxon 2.0.2","title":"dwctaxon 2.0.2","text":"CRAN release: 2023-05-30","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"other-2-0-2","dir":"Changelog","previous_headings":"","what":"Other","title":"dwctaxon 2.0.2","text":"Save options options() restore end example (https://github.com/ropensci/dwctaxon/commit/c9a3c3b432854521d876c2492931ed6189a7abca)","code":""},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"other-2-0-1","dir":"Changelog","previous_headings":"","what":"Other","title":"dwctaxon 2.0.1","text":"Use /dontrun{} skip examples intentionally cause errors (https://github.com/ropensci/dwctaxon/pull/89) Save user settings dct_options() restore end example (https://github.com/ropensci/dwctaxon/pull/91)","code":""},{"path":[]},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"breaking-changes-2-0-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"dwctaxon 2.0.0","text":"Allow self-mapping taxonID acceptedNameUsageID (https://github.com/ropensci/dwctaxon/pull/60) Don’t provide aliases DwC terms (https://github.com/ropensci/dwctaxon/pull/63)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"new-features-2-0-0","dir":"Changelog","previous_headings":"","what":"New features","title":"dwctaxon 2.0.0","text":"Full MD5 hash used generating values taxonID, option use shorter lengths (https://github.com/ropensci/dwctaxon/pull/45) Add option allow extra (non-DwC) columns (https://github.com/ropensci/dwctaxon/pull/61) Add function drop rows (https://github.com/ropensci/dwctaxon/pull/71)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"documentation-2-0-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"dwctaxon 2.0.0","text":"Move repo rOpenSci organization (https://github.com/ropensci/dwctaxon/pull/78) Add Statement Need README (https://github.com/ropensci/dwctaxon/pull/55) Add vignette showing fetch data (https://github.com/ropensci/dwctaxon/pull/62) Standardize capitalization “DwC” documentation (https://github.com/ropensci/dwctaxon/pull/64) Clarify new columns added documentation (https://github.com/ropensci/dwctaxon/pull/69)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"bug-fixes-2-0-0","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"dwctaxon 2.0.0","text":"Fix dct_fill_col() mistakenly allowing use missing column fill_from (https://github.com/ropensci/dwctaxon/pull/54)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"other-2-0-0","dir":"Changelog","previous_headings":"","what":"Other","title":"dwctaxon 2.0.0","text":"Reduce cyclomatic complexity splitting subfunctions removing () calls possible (https://github.com/ropensci/dwctaxon/issues/50)","code":""},{"path":"https://docs.ropensci.org/dwctaxon/news/index.html","id":"dwctaxon-100","dir":"Changelog","previous_headings":"","what":"dwctaxon 1.0.0","title":"dwctaxon 1.0.0","text":"Working version package functionality editing validating dataframes Darwin Core (DwC) Taxon format","code":""}]
