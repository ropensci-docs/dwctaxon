<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides functions to create, manipulate, and validate taxonomic 
data in compliance with Darwin Core standards in R.
">
<title>Tools for Working with Darwin Core Taxon Data in R • dwctaxon</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Working with Darwin Core Taxon Data in R">
<meta property="og:description" content="Provides functions to create, manipulate, and validate taxonomic 
data in compliance with Darwin Core standards in R.
">
<meta property="og:image" content="https://docs.ropensci.org/dwctaxon/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">dwctaxon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/what-is-dwc.html">What is DwC?</a>
    <a class="dropdown-item" href="articles/editing.html">Editing DwC taxon data</a>
    <a class="dropdown-item" href="articles/validation.html">Validating DwC taxon data</a>
    <a class="dropdown-item" href="articles/real-data.html">Real World Example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/dwctaxon/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="dwctaxon-">dwctaxon <a class="anchor" aria-label="anchor" href="#dwctaxon-"></a>
</h1>
</div>
<!-- badges: start -->
<p>The goal of dwctaxon is to facilitate working with <a href="https://dwc.tdwg.org/terms/#taxon" class="external-link">Darwin Core Taxon data</a> in R.</p>
<div class="section level2">
<h2 id="statement-of-need">Statement of need<a class="anchor" aria-label="anchor" href="#statement-of-need"></a>
</h2>
<p>dwctaxon facilitates <strong>editing</strong> and <strong>validating</strong> Darwin Core Taxon data. There are various reasons one might want to do this. Here is a non-exhaustive list of use-cases for dwctaxon:</p>
<ul>
<li>To maintain an existing taxonomic database.</li>
<li>To prepare a taxonomic database as a reference for taxonomic name resolution, for example with the <a href="https://github.com/joelnitta/taxastand" class="external-link">taxastand</a> or <a href="https://doi.org/10.1016/j.pld.2022.09.001" class="external-link">U.Taxonstand</a> R packages.</li>
<li>To curate taxonomic data as part of a <a href="https://en.wikipedia.org/wiki/Darwin_Core_Archive" class="external-link">Darwin Core Archive</a>.</li>
</ul>
<p>In theory, dwctaxon could be used to create taxonomic databases from scratch, but it is more likely to be useful for updating and validating existing databases (R in general is more suited to data wrangling and analysis as opposed to data entry).</p>
</div>
<div class="section level2">
<h2 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
</h2>
<p>For detailed usage examples, see the vignettes:</p>
<ul>
<li><a href="https://docs.ropensci.org/dwctaxon/articles/what-is-dwc.html">What is DwC?</a></li>
<li><a href="https://docs.ropensci.org/dwctaxon/articles/editing.html">Editing DwC taxon data</a></li>
<li><a href="https://docs.ropensci.org/dwctaxon/articles/validation.html">Validating DwC taxon data</a></li>
<li><a href="https://docs.ropensci.org/dwctaxon/articles/real-data.html">Real World Example</a></li>
</ul>
<p>For more information about dwctaxon, in particular for using it to maintain a reference database for taxonomic name resolution, see <a href="https://www.joelnitta.com/talks/2022-09-27_biodigi.html" class="external-link">taxastand and dwctaxon: A pair of R packages for standardizing species names in Darwin Core format (BioDigiCon 2022 talk)</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The stable version can be installed from <a href="https://cran.r-project.org/package=dwctaxon" class="external-link">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dwctaxon"</span><span class="op">)</span></span></code></pre></div>
<p>The development version can be installed from <a href="https://ropensci.r-universe.dev/dwctaxon" class="external-link">r-universe</a> or <a href="https://github.com/ropensci/dwctaxon" class="external-link">github</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  ropensci <span class="op">=</span> <span class="st">"https://ropensci.r-universe.dev/"</span>, </span>
<span>  CRAN <span class="op">=</span> <span class="st">"https://cran.rstudio.com/"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dwctaxon"</span>, dep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>OR</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropensci/dwctaxon"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>First, load packages and a dataset to work with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span> <span class="co"># recommended for pretty printing of tibbles</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/dwctaxon/">dwctaxon</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dct_filmies</span></span>
<span><span class="co">#&gt; # A tibble: 2,451 × 5</span></span>
<span><span class="co">#&gt;    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                                     </span></span>
<span><span class="co">#&gt;  1 54115096 &lt;NA&gt;                accepted        species   Cephalomanes atrovirens Presl             </span></span>
<span><span class="co">#&gt;  2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                </span></span>
<span><span class="co">#&gt;  3 54115097 &lt;NA&gt;                accepted        species   Cephalomanes crassum (Copel.) M. G. Price </span></span>
<span><span class="co">#&gt;  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           </span></span>
<span><span class="co">#&gt;  5 54115098 &lt;NA&gt;                accepted        species   Cephalomanes densinervium (Copel.) Copel. </span></span>
<span><span class="co">#&gt;  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch</span></span>
<span><span class="co">#&gt;  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch   </span></span>
<span><span class="co">#&gt;  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl          </span></span>
<span><span class="co">#&gt;  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch       </span></span>
<span><span class="co">#&gt; 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl            </span></span>
<span><span class="co">#&gt; # ℹ 2,441 more rows</span></span></code></pre></div>
<p><code>dct_filmies</code> is a taxonomic dataset of filmy ferns included in dwctaxon.</p>
<p>For demonstration purposes, we will just use the first five rows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filmies_small</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dct_filmies</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>All functions in dwctaxon start with <code>dct_</code>.</p>
<div class="section level3">
<h3 id="edit-data">Edit data<a class="anchor" aria-label="anchor" href="#edit-data"></a>
</h3>
<p><code><a href="reference/dct_add_row.html">dct_add_row()</a></code> adds one or more rows, automatically providing values for <code>taxonID</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filmies_small</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_add_row.html">dct_add_row</a></span><span class="op">(</span></span>
<span>    scientificName <span class="op">=</span> <span class="st">"Hymenophyllum dwctaxonense Nitta"</span>,</span>
<span>    taxonomicStatus <span class="op">=</span> <span class="st">"accepted"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span><span class="co">#&gt;   taxonID                          acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified         </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                            &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                                     &lt;chr&gt;            </span></span>
<span><span class="co">#&gt; 1 54115096                         &lt;NA&gt;                accepted        species   Cephalomanes atrovirens Presl             &lt;NA&gt;             </span></span>
<span><span class="co">#&gt; 2 54133783                         54115097            synonym         species   Trichomanes crassum Copel.                &lt;NA&gt;             </span></span>
<span><span class="co">#&gt; 3 54115097                         &lt;NA&gt;                accepted        species   Cephalomanes crassum (Copel.) M. G. Price &lt;NA&gt;             </span></span>
<span><span class="co">#&gt; 4 54133784                         54115098            synonym         species   Trichomanes densinervium Copel.           &lt;NA&gt;             </span></span>
<span><span class="co">#&gt; 5 54115098                         &lt;NA&gt;                accepted        species   Cephalomanes densinervium (Copel.) Copel. &lt;NA&gt;             </span></span>
<span><span class="co">#&gt; 6 193e2011c8ace0ed138af91f41a335cc &lt;NA&gt;                accepted        &lt;NA&gt;      Hymenophyllum dwctaxonense Nitta          2024-02-02 20:11…</span></span></code></pre></div>
<p><code><a href="reference/dct_modify_row.html">dct_modify_row()</a></code> modifies a row, automatically re-mapping synonyms if needed.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Change C. densinervium to a synonym of C. crassum</span></span>
<span><span class="va">filmies_small</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_modify_row.html">dct_modify_row</a></span><span class="op">(</span></span>
<span>    scientificName <span class="op">=</span> <span class="st">"Cephalomanes densinervium (Copel.) Copel."</span>,</span>
<span>    taxonomicStatus <span class="op">=</span> <span class="st">"synonym"</span>,</span>
<span>    acceptedNameUsage <span class="op">=</span> <span class="st">"Cephalomanes crassum (Copel.) M. G. Price"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 6</span></span>
<span><span class="co">#&gt;   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            modified                  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                                     &lt;chr&gt;                     </span></span>
<span><span class="co">#&gt; 1 54115096 &lt;NA&gt;                accepted        species   Cephalomanes atrovirens Presl             &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt; 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt; 3 54115097 &lt;NA&gt;                accepted        species   Cephalomanes crassum (Copel.) M. G. Price &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt; 4 54133784 54115097            synonym         species   Trichomanes densinervium Copel.           2024-02-02 20:11:18.52043 </span></span>
<span><span class="co">#&gt; 5 54115098 54115097            synonym         species   Cephalomanes densinervium (Copel.) Copel. 2024-02-02 20:11:18.488248</span></span></code></pre></div>
<p><code><a href="reference/dct_fill_col.html">dct_fill_col()</a></code> fills in values for columns that have “term” - “termID” pairs (e.g., <code>acceptedNameUsage</code> and <code>acceptedNameUsageID</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fill-in the acceptedNameUsage column with scientific names</span></span>
<span><span class="va">filmies_small</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_fill_col.html">dct_fill_col</a></span><span class="op">(</span></span>
<span>    fill_to <span class="op">=</span> <span class="st">"acceptedNameUsage"</span>,</span>
<span>    fill_from <span class="op">=</span> <span class="st">"scientificName"</span>,</span>
<span>    match_to <span class="op">=</span> <span class="st">"taxonID"</span>,</span>
<span>    match_from <span class="op">=</span> <span class="st">"acceptedNameUsageID"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 7</span></span>
<span><span class="co">#&gt;   taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                            acceptedNameUsage                modified</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                                     &lt;chr&gt;                            &lt;chr&gt;   </span></span>
<span><span class="co">#&gt; 1 54115096 &lt;NA&gt;                accepted        species   Cephalomanes atrovirens Presl             &lt;NA&gt;                             2024-02…</span></span>
<span><span class="co">#&gt; 2 54133783 54115097            synonym         species   Trichomanes crassum Copel.                Cephalomanes crassum (Copel.) M… 2024-02…</span></span>
<span><span class="co">#&gt; 3 54115097 &lt;NA&gt;                accepted        species   Cephalomanes crassum (Copel.) M. G. Price &lt;NA&gt;                             2024-02…</span></span>
<span><span class="co">#&gt; 4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.           Cephalomanes densinervium (Cope… 2024-02…</span></span>
<span><span class="co">#&gt; 5 54115098 &lt;NA&gt;                accepted        species   Cephalomanes densinervium (Copel.) Copel. &lt;NA&gt;                             2024-02…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="validate-data">Validate data<a class="anchor" aria-label="anchor" href="#validate-data"></a>
</h3>
<p><code><a href="reference/dct_validate.html">dct_validate()</a></code> is the main function for validation, and automatically conducts a series of checks. The individual checks can be run with <code>dct_check_*()</code> functions.</p>
<p>The <code>dct_filmies</code> dataset is already well-formatted, so it will pass validation:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default behavior is to return the original dataset if checks pass</span></span>
<span><span class="co"># For this example, return TRUE instead</span></span>
<span><span class="fu"><a href="reference/dct_validate.html">dct_validate</a></span><span class="op">(</span><span class="va">dct_filmies</span>, on_success <span class="op">=</span> <span class="st">"logical"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>For demonstration purposes, let’s mess up the data:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start by duplicating some data</span></span>
<span><span class="va">filmies_dirty</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dct_filmies</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dct_filmies</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Replace some values of `acceptedNameUsageID` with random letters</span></span>
<span><span class="va">filmies_dirty</span><span class="op">$</span><span class="va">acceptedNameUsageID</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>By default, <code><a href="reference/dct_validate.html">dct_validate()</a></code> will stop with an error on the first check that fails:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dct_validate.html">dct_validate</a></span><span class="op">(</span><span class="va">filmies_dirty</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: check_taxon_id failed</span></span>
<span><span class="co">#&gt;    taxonID detected with duplicated value</span></span>
<span><span class="co">#&gt;    Bad taxonID: 54115096, 54133783</span></span></code></pre></div>
<p>But it may be useful to get an overview of all the checks that failed. This can be done by setting <code>on_fail</code> to <code>"summary"</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dct_validate.html">dct_validate</a></span><span class="op">(</span><span class="va">filmies_dirty</span>, on_fail <span class="op">=</span> <span class="st">"summary"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: taxonID detected with duplicated value</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: taxonID detected whose acceptedNameUsageID value does not map to taxonID of an existing name.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: scientificName detected with duplicated value</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 9 × 5</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   taxonID  acceptedNameUsageID scientificName                             error                                    check         </span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                                      &lt;glue&gt;                                   &lt;chr&gt;         </span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 54115096 b                   Cephalomanes atrovirens Presl              taxonID detected whose acceptedNameUs... check_mapping </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 54133783 k                   Trichomanes crassum Copel.                 taxonID detected whose acceptedNameUs... check_mapping </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 54115097 s                   Cephalomanes crassum (Copel.) M. G. Price  taxonID detected whose acceptedNameUs... check_mapping </span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 54133786 n                   Cephalomanes curvatum (J. Sm.) V. D. Bosch taxonID detected whose acceptedNameUs... check_mapping </span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 54133783 p                   Trichomanes crassum Copel.                 taxonID detected whose acceptedNameUs... check_mapping </span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 54115096 &lt;NA&gt;                Cephalomanes atrovirens Presl              scientificName detected with duplicat... check_sci_name</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 54133783 &lt;NA&gt;                Trichomanes crassum Copel.                 scientificName detected with duplicat... check_sci_name</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 54115096 &lt;NA&gt;                &lt;NA&gt;                                       taxonID detected with duplicated value   check_taxon_id</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9 54133783 &lt;NA&gt;                &lt;NA&gt;                                       taxonID detected with duplicated value   check_taxon_id</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="piping">Piping<a class="anchor" aria-label="anchor" href="#piping"></a>
</h3>
<p>All the functions in dwctaxon take a dataframe as their first argument and return a dataframe by default, so they are “pipe-friendly” and can be chained together:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dct_filmies</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_modify_row.html">dct_modify_row</a></span><span class="op">(</span></span>
<span>    taxonID <span class="op">=</span> <span class="st">"54133783"</span>,</span>
<span>    taxonomicStatus <span class="op">=</span> <span class="st">"accepted"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_add_row.html">dct_add_row</a></span><span class="op">(</span></span>
<span>    scientificName <span class="op">=</span> <span class="st">"Hymenophyllum dwctaxonense Nitta"</span>,</span>
<span>    taxonomicStatus <span class="op">=</span> <span class="st">"accepted"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/dct_validate.html">dct_validate</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2,452 × 6</span></span>
<span><span class="co">#&gt;    taxonID  acceptedNameUsageID taxonomicStatus taxonRank scientificName                             modified                  </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                                      &lt;chr&gt;                     </span></span>
<span><span class="co">#&gt;  1 54115096 &lt;NA&gt;                accepted        species   Cephalomanes atrovirens Presl              &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  2 54133783 &lt;NA&gt;                accepted        species   Trichomanes crassum Copel.                 2024-02-02 20:11:18.650982</span></span>
<span><span class="co">#&gt;  3 54115097 &lt;NA&gt;                accepted        species   Cephalomanes crassum (Copel.) M. G. Price  &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  4 54133784 54115098            synonym         species   Trichomanes densinervium Copel.            &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  5 54115098 &lt;NA&gt;                accepted        species   Cephalomanes densinervium (Copel.) Copel.  &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  6 54133786 54115100            synonym         species   Cephalomanes curvatum (J. Sm.) V. D. Bosch &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  7 54133787 54115100            synonym         species   Cephalomanes javanica (Bl.) V. D. Bosch    &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  8 54133788 54115100            synonym         species   Cephalomanes oblongifolium Presl           &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt;  9 54133789 54115100            synonym         species   Cephalomanes zollingeri V. D. Bosch        &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt; 10 54133790 54115100            synonym         species   Lacostea javanica (Bl.) Prantl             &lt;NA&gt;                      </span></span>
<span><span class="co">#&gt; # ℹ 2,442 more rows</span></span></code></pre></div>
<p>It’s often a good idea to include <code><a href="reference/dct_validate.html">dct_validate()</a></code> at the end of a chain to make sure the modified taxonomic database is still correctly formatted.</p>
</div>
</div>
<div class="section level2">
<h2 id="citing-this-package">Citing this package<a class="anchor" aria-label="anchor" href="#citing-this-package"></a>
</h2>
<p>If you use this package, please cite it!</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Nitta, JH and Iwasaki, <span class="fu">W</span> (<span class="dv">2024</span>). dwctaxon, an R package <span class="cf">for</span> editing and validating taxonomic data <span class="cf">in</span> Darwin Core format. Journal of Open Source Software, <span class="dv">9</span>(<span class="dv">93</span>), <span class="dv">6215</span>, https<span class="sc">:</span><span class="er">//</span>doi.org<span class="sc">/</span><span class="fl">10.21105</span><span class="sc">/</span>joss<span class="fl">.06215</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Contributions to this package are welcome! Please see the <a href="https://github.com/ropensci/dwctaxon/blob/main/.github/CONTRIBUTING.md" class="external-link">Contribution Guide</a> and <a href="https://ropensci.org/code-of-conduct/" class="external-link">Code of Conduct</a>.</p>
</div>
<div class="section level2">
<h2 id="note-to-developers">Note to developers<a class="anchor" aria-label="anchor" href="#note-to-developers"></a>
</h2>
<p><a href="https://github.com/anthonynorth/roxyglobals" class="external-link">roxyglobals</a> is used to maintain <a href="R/globals.R"><code>R/globals.R</code></a>, but is not available on CRAN. You will need to install this package from github and use the <code>@autoglobal</code> or <code>@global</code> roxygen tags to develop functions with globals.</p>
</div>
<div class="section level2">
<h2 id="licenses">Licenses<a class="anchor" aria-label="anchor" href="#licenses"></a>
</h2>
<p>Code: <a href="https://github.com/ropensci/dwctaxon/blob/main/LICENSE.md" class="external-link">MIT License</a></p>
<p>Data:</p>
<ul>
<li>
<a href="https://docs.ropensci.org/dwctaxon/reference/dct_filmies.html"><code>dct_filmies</code></a>: Modified from data downloaded from the <a href="https://www.catalogueoflife.org/" class="external-link">Catalog of Life</a> under the <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">Creative Commons Attribution (CC BY) 4.0</a> license.</li>
<li>
<a href="https://docs.ropensci.org/dwctaxon/reference/dct_terms.html"><code>dct_terms</code></a>: Modified from data downloaded from <a href="https://dwc.tdwg.org/" class="external-link">TDWG Darwin Core</a> under the <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">Creative Commons Attribution (CC BY)4.0</a> license.</li>
</ul>
<p>Images:</p>
<ul><li>
<a href="https://docs.ropensci.org/dwctaxon/articles/dwca.png">DwC archive components image</a>: Copied from <a href="https://github.com/gbif/ipt/" class="external-link">GBIF Integrated Publishing Toolkit (IPT)</a> under the <a href="https://github.com/gbif/ipt/blob/master/LICENSE.txt" class="external-link">Apache license</a>
</li></ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=dwctaxon" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/dwctaxon/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/dwctaxon/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dwctaxon</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Joel H. Nitta <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-4719-7472" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="r-universe">
<h2 data-toc-skip>R-universe</h2>
<ul class="list-unstyled">
<li><p><a href="https://ropensci.r-universe.dev/dwctaxon" class="external-link"><img src="https://ropensci.r-universe.dev/badges/dwctaxon" alt="dwctaxon status badge"></a></p></li>
</ul>
</div>

<div class="software-peer-review">
<h2 data-toc-skip>Software Peer-Review</h2>
<ul class="list-unstyled">
<li><p><a href="https://github.com/ropensci/software-review/issues/574" class="external-link"><img src="https://badges.ropensci.org/574_status.svg" alt="rOpenSci peer-review"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
